<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é˜³å…‰ç”µæºæ§åˆ¶ - å·¥å•†å‚¨èƒ½ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="common-styles.css">
    <style>
        /* é˜³å…‰ç”µæºç‰¹å®šæ ·å¼ */
        .brand-header {
            background: linear-gradient(135deg, #ff6b00 0%, #ff8533 100%);
            color: white;
            padding: 1.5rem;
            border-radius: 0.5rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .brand-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .brand-logo {
            width: 120px;
            height: auto;
        }

        .model-info {
            font-size: 0.875rem;
            opacity: 0.9;
        }

        /* è¿è¡Œæ¨¡å¼å¡ç‰‡ */
        .mode-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1rem;
        }

        .mode-card {
            background: white;
            border: 2px solid #e2e8f0;
            border-radius: 0.5rem;
            padding: 1rem;
            cursor: pointer;
            transition: all 200ms ease;
            text-align: center;
            position: relative;
        }

        .mode-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        .mode-card.active {
            border-color: #3b82f6;
            background: #eff6ff;
        }

        .mode-card.active::after {
            content: 'âœ“';
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 20px;
            height: 20px;
            background: #3b82f6;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.75rem;
        }

        .mode-icon {
            width: 48px;
            height: 48px;
            margin: 0 auto 0.5rem;
            display: flex;
            align-items: center;
            justify-content: center;
            background: #ff6b00;
            color: white;
            border-radius: 50%;
            font-size: 1.5rem;
        }

        .mode-name {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }

        .mode-desc {
            font-size: 0.75rem;
            color: #64748b;
        }

        /* å®æ—¶æ•°æ®ç›‘æ§ */
        .realtime-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1rem;
            margin-bottom: 2rem;
        }

        .realtime-card {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .realtime-label {
            font-size: 0.875rem;
            color: #64748b;
            margin-bottom: 0.5rem;
        }

        .realtime-value {
            font-size: 2rem;
            font-weight: 700;
            color: #1e293b;
            display: flex;
            align-items: baseline;
            gap: 0.5rem;
        }

        .realtime-unit {
            font-size: 1rem;
            font-weight: 400;
            color: #64748b;
        }

        .realtime-trend {
            font-size: 0.875rem;
            margin-top: 0.5rem;
            display: flex;
            align-items: center;
            gap: 0.25rem;
        }

        .trend-up {
            color: #22c55e;
        }

        .trend-down {
            color: #ef4444;
        }

        /* PCSæ§åˆ¶é¢æ¿ */
        .pcs-panel {
            background: white;
            border-radius: 0.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            overflow: hidden;
            margin-bottom: 1.5rem;
        }

        .pcs-header {
            background: #f8fafc;
            padding: 1rem 1.5rem;
            border-bottom: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .pcs-title {
            font-weight: 600;
            color: #1e293b;
        }

        .pcs-status {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
        }

        .status-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: #22c55e;
        }

        .status-indicator.warning {
            background: #f59e0b;
        }

        .status-indicator.error {
            background: #ef4444;
        }

        .pcs-content {
            padding: 1.5rem;
        }

        /* å……æ”¾ç”µç­–ç•¥ */
        .strategy-timeline {
            background: white;
            border-radius: 0.5rem;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }

        .timeline-chart {
            height: 200px;
            background: #f8fafc;
            border-radius: 0.375rem;
            position: relative;
            overflow: hidden;
        }

        .time-axis {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            height: 30px;
            border-top: 1px solid #e2e8f0;
            display: flex;
            justify-content: space-between;
            padding: 0.5rem;
            font-size: 0.75rem;
            color: #64748b;
        }

        /* é«˜çº§è®¾ç½® */
        .advanced-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        .parameter-group {
            background: #f8fafc;
            border-radius: 0.5rem;
            padding: 1rem;
        }

        .parameter-title {
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 1rem;
            font-size: 0.875rem;
        }

        .parameter-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.75rem;
        }

        .parameter-label {
            font-size: 0.875rem;
            color: #64748b;
        }

        .parameter-value {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .mini-input {
            width: 80px;
            padding: 0.25rem 0.5rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.25rem;
            font-size: 0.875rem;
            text-align: right;
        }

        /* å‘Šè­¦çŠ¶æ€ */
        .alarm-banner {
            background: #fef3c7;
            border: 1px solid #fcd34d;
            border-radius: 0.5rem;
            padding: 1rem;
            margin-bottom: 1.5rem;
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .alarm-icon {
            color: #f59e0b;
            font-size: 1.5rem;
        }

        .alarm-content {
            flex: 1;
        }

        .alarm-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 0.25rem;
        }

        .alarm-desc {
            font-size: 0.875rem;
            color: #92400e;
        }

        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .mode-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .realtime-grid {
                grid-template-columns: 1fr;
            }

            .advanced-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- ä¾§è¾¹æ  -->
    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <img src="../logo.png" alt="AlwaysControl Technology Logo">
            </div>
        </div>
        <nav class="sidebar-menu">
            <!-- ç”µç«™ç®¡ç†ï¼ˆå¸¦äºŒçº§èœå•ï¼‰ -->
            <div class="menu-group">
                <div class="menu-parent expanded" onclick="toggleSubmenu(this)">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <span class="menu-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                            </svg>
                        </span>
                        <span>ç”µç«™</span>
                    </div>
                    <span class="menu-arrow">â–¶</span>
                </div>
                <div class="submenu open">
                    <a href="./station-management.html" class="submenu-item">
                        <span>ç”µç«™ç®¡ç†</span>
                    </a>
                    <a href="./control.html" class="submenu-item active">
                        <span>æ§åˆ¶</span>
                    </a>
                    <a href="./price-settings.html" class="submenu-item">
                        <span>ç”µä»·è®¾ç½®</span>
                    </a>
                </div>
            </div>
            
            <!-- å…¶ä»–ä¸€çº§èœå• -->
            <a href="./data-analysis.html" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3v18h18"/>
                        <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/>
                    </svg>
                </span>
                <span>æ•°æ®åˆ†æ</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                </span>
                <span>å‘Šè­¦ç®¡ç†</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                        <line x1="12" y1="8" x2="12" y2="16"/>
                        <line x1="8" y1="12" x2="16" y2="12"/>
                    </svg>
                </span>
                <span>è®¾å¤‡ç®¡ç†</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="8.5" cy="7" r="4"/>
                        <line x1="20" y1="8" x2="20" y2="14"/>
                        <line x1="23" y1="11" x2="17" y2="11"/>
                    </svg>
                </span>
                <span>ç”¨æˆ·ç®¡ç†</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                </span>
                <span>æŠ¥è¡¨ä¸­å¿ƒ</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
                        <path d="M20.5 7.5L16 12l4.5 4.5M3.5 7.5L8 12l-4.5 4.5"/>
                    </svg>
                </span>
                <span>ç³»ç»Ÿè®¾ç½®</span>
            </a>
            
            <!-- åˆ†éš”çº¿ -->
            <div class="menu-divider"></div>
            <div class="menu-section-title">å“ç‰Œæ§åˆ¶ç³»ç»Ÿ</div>
            
            <!-- å“ç‰Œæ§åˆ¶èœå• -->
            <a href="./control-sungrow.html" class="menu-item active">
                <span class="menu-icon" style="background: #ff6b00; color: white; border-radius: 4px; font-size: 14px;">â˜€ï¸</span>
                <span>é˜³å…‰ç”µæº</span>
            </a>
            <a href="./control-huawei.html" class="menu-item">
                <span class="menu-icon" style="background: #e60012; color: white; border-radius: 4px; font-size: 14px;">ğŸŒŸ</span>
                <span>åä¸ºæ™ºèƒ½</span>
            </a>
            <a href="./control-tesla.html" class="menu-item">
                <span class="menu-icon" style="background: #cc0000; color: white; border-radius: 4px; font-size: 14px;">âš¡</span>
                <span>ç‰¹æ–¯æ‹‰</span>
            </a>
        </nav>
    </aside>

    <!-- ä¸»å†…å®¹åŒº -->
    <main class="content">
        <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="navbar-left">
                <button class="nav-button" onclick="toggleSidebar()">
                    <span>â˜°</span>
                </button>
                <button class="nav-button" onclick="window.location.href='control.html'">
                    <span>â†</span>
                    <span>è¿”å›æ§åˆ¶ä¸­å¿ƒ</span>
                </button>
                <h1 class="page-title">é˜³å…‰ç”µæºæ§åˆ¶ç³»ç»Ÿ</h1>
            </div>
            <div class="navbar-right">
                <button class="nav-button" onclick="toggleLanguage()">
                    <span>ğŸŒ</span>
                    <span id="lang-text">ä¸­æ–‡</span>
                </button>
                <button class="nav-button" onclick="toggleTheme()">
                    <span id="theme-icon">ğŸŒ™</span>
                </button>
                <button class="nav-button">
                    <span>ğŸ‘¤</span>
                    <span>ç®¡ç†å‘˜</span>
                </button>
            </div>
        </nav>

        <!-- é¡µé¢å†…å®¹ -->
        <div class="page-content">
            <!-- å“ç‰Œä¿¡æ¯å¤´éƒ¨ -->
            <div class="brand-header">
                <div class="brand-info">
                    <div>
                        <h2>Sungrow PowerStack</h2>
                        <p class="model-info">å‹å·: ST2752UX-3450 | å®¹é‡: 3.45MWh | å›ºä»¶: V3.2.1</p>
                    </div>
                </div>
                <div class="brand-actions">
                    <button class="btn btn-secondary" style="background: white; color: #ff6b00;">
                        <span>ğŸ“Š</span>
                        <span>å¯¼å‡ºæŠ¥å‘Š</span>
                    </button>
                </div>
            </div>

            <!-- å‘Šè­¦æç¤º -->
            <div class="alarm-banner">
                <span class="alarm-icon">âš ï¸</span>
                <div class="alarm-content">
                    <div class="alarm-title">æ¸©åº¦å‘Šè­¦</div>
                    <div class="alarm-desc">ç”µæ± ç°‡3æ¸©åº¦åé«˜(38.5Â°C)ï¼Œç³»ç»Ÿå·²è‡ªåŠ¨é™ä½å……ç”µåŠŸç‡</div>
                </div>
                <button class="btn btn-secondary" style="font-size: 0.875rem;">æŸ¥çœ‹è¯¦æƒ…</button>
            </div>

            <!-- é€šç”¨è¿è¡Œæ¨¡å¼é€‰æ‹© -->
            <section class="control-section" style="background: #f8fafc; border: 2px solid #3b82f6;">
                <div class="section-header" style="background: #eff6ff;">
                    <h2 class="section-title" style="color: #1e40af;">é€šç”¨è¿è¡Œæ¨¡å¼</h2>
                    <span style="font-size: 0.875rem; color: #64748b;">æ‰€æœ‰å“ç‰Œå…±åŒæ”¯æŒçš„æ ‡å‡†æ¨¡å¼</span>
                </div>
                <div class="section-content">
                    <div class="mode-grid" style="grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));">
                        <div class="mode-card active" onclick="selectMode(this, 'peak')">
                            <div class="mode-icon" style="background: #3b82f6;">ğŸ“Š</div>
                            <div class="mode-name">å‰Šå³°å¡«è°·</div>
                            <div class="mode-desc">å³°è°·ç”µä»·å¥—åˆ©ï¼Œä½å……é«˜æ”¾</div>
                        </div>
                        <div class="mode-card" onclick="selectMode(this, 'demand')">
                            <div class="mode-icon" style="background: #3b82f6;">âš¡</div>
                            <div class="mode-name">éœ€æ±‚å“åº”</div>
                            <div class="mode-desc">å“åº”ç”µç½‘è°ƒåº¦æŒ‡ä»¤</div>
                        </div>
                        <div class="mode-card" onclick="selectMode(this, 'backup')">
                            <div class="mode-icon" style="background: #3b82f6;">ğŸ”‹</div>
                            <div class="mode-name">å¤‡ç”¨ç”µæº</div>
                            <div class="mode-desc">åº”æ€¥å¤‡ç”µï¼Œä¿éšœä¾›ç”µ</div>
                        </div>
                        <div class="mode-card" onclick="selectMode(this, 'manual')">
                            <div class="mode-icon" style="background: #3b82f6;">ğŸ›ï¸</div>
                            <div class="mode-name">æ‰‹åŠ¨æ§åˆ¶</div>
                            <div class="mode-desc">è‡ªå®šä¹‰å……æ”¾ç”µå‚æ•°</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- é˜³å…‰ç”µæºç‰¹è‰²æ¨¡å¼ -->
            <section class="control-section" style="margin-top: 1.5rem;">
                <div class="section-header" style="background: #fff5f0;">
                    <h2 class="section-title" style="color: #ff6b00;">é˜³å…‰ç”µæºç‰¹è‰²åŠŸèƒ½</h2>
                </div>
                <div class="section-content">
                    <div class="mode-grid" style="grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));">
                        <div class="mode-card" onclick="selectMode(this, 'smart')">
                            <div class="mode-icon">ğŸ¤–</div>
                            <div class="mode-name">AIæ™ºèƒ½è°ƒåº¦</div>
                            <div class="mode-desc">æ·±åº¦å­¦ä¹ ä¼˜åŒ–ç­–ç•¥</div>
                        </div>
                        <div class="mode-card" onclick="selectMode(this, 'vpp')">
                            <div class="mode-icon">ğŸŒ</div>
                            <div class="mode-name">è™šæ‹Ÿç”µå‚VPP</div>
                            <div class="mode-desc">èšåˆè°ƒåº¦ï¼Œè¾…åŠ©æœåŠ¡</div>
                        </div>
                        <div class="mode-card" onclick="selectMode(this, 'string')">
                            <div class="mode-icon">ğŸ”—</div>
                            <div class="mode-name">ç»„ä¸²ä¼˜åŒ–</div>
                            <div class="mode-desc">æ™ºèƒ½ç»„ä¸²å‡è¡¡ç®¡ç†</div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- å®æ—¶è¿è¡Œæ•°æ® -->
            <section class="control-section">
                <div class="section-header">
                    <h2 class="section-title">å®æ—¶è¿è¡Œæ•°æ®</h2>
                    <span style="font-size: 0.875rem; color: #64748b;">æ›´æ–°æ—¶é—´: <span id="update-time">14:35:22</span></span>
                </div>
                <div class="section-content">
                    <div class="realtime-grid">
                        <div class="realtime-card">
                            <div class="realtime-label">å½“å‰åŠŸç‡</div>
                            <div class="realtime-value">
                                1,250<span class="realtime-unit">kW</span>
                            </div>
                            <div class="realtime-trend trend-up">
                                â†‘ å……ç”µä¸­
                            </div>
                        </div>
                        <div class="realtime-card">
                            <div class="realtime-label">ç”µæ± SOC</div>
                            <div class="realtime-value">
                                72.8<span class="realtime-unit">%</span>
                            </div>
                            <div class="realtime-trend trend-up">
                                â†‘ +2.3%/h
                            </div>
                        </div>
                        <div class="realtime-card">
                            <div class="realtime-label">å¯ç”¨å®¹é‡</div>
                            <div class="realtime-value">
                                2.51<span class="realtime-unit">MWh</span>
                            </div>
                            <div class="realtime-trend">
                                æ€»å®¹é‡: 3.45 MWh
                            </div>
                        </div>
                        <div class="realtime-card">
                            <div class="realtime-label">ç³»ç»Ÿæ•ˆç‡</div>
                            <div class="realtime-value">
                                94.6<span class="realtime-unit">%</span>
                            </div>
                            <div class="realtime-trend">
                                åŒå‘æ•ˆç‡ >90%
                            </div>
                        </div>
                        <div class="realtime-card">
                            <div class="realtime-label">ç”µç½‘é¢‘ç‡</div>
                            <div class="realtime-value">
                                50.02<span class="realtime-unit">Hz</span>
                            </div>
                            <div class="realtime-trend" style="color: #22c55e;">
                                âœ“ æ­£å¸¸èŒƒå›´
                            </div>
                        </div>
                        <div class="realtime-card">
                            <div class="realtime-label">ç¯å¢ƒæ¸©åº¦</div>
                            <div class="realtime-value">
                                28.5<span class="realtime-unit">Â°C</span>
                            </div>
                            <div class="realtime-trend">
                                æ¹¿åº¦: 65%
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- PCSæ§åˆ¶ -->
            <div class="pcs-panel">
                <div class="pcs-header">
                    <h3 class="pcs-title">PCSå˜æµå™¨æ§åˆ¶</h3>
                    <div class="pcs-status">
                        <span class="status-indicator"></span>
                        <span>4å°åœ¨çº¿è¿è¡Œ</span>
                    </div>
                </div>
                <div class="pcs-content">
                    <div class="control-grid">
                        <div class="control-item">
                            <label class="control-label">æœ‰åŠŸåŠŸç‡è®¾å®š</label>
                            <div class="control-value">
                                <input type="number" class="control-input" value="1250" step="10">
                                <span class="control-unit">kW</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label class="control-label">æ— åŠŸåŠŸç‡è®¾å®š</label>
                            <div class="control-value">
                                <input type="number" class="control-input" value="0" step="10">
                                <span class="control-unit">kVar</span>
                            </div>
                        </div>
                        <div class="control-item">
                            <label class="control-label">åŠŸç‡å› æ•°</label>
                            <div class="control-value">
                                <input type="number" class="control-input" value="0.99" min="0.8" max="1" step="0.01">
                            </div>
                        </div>
                        <div class="control-item">
                            <label class="control-label">ç”µå‹æ§åˆ¶æ¨¡å¼</label>
                            <div class="control-value">
                                <select class="control-input">
                                    <option>æ’åŠŸç‡å› æ•°</option>
                                    <option>æ’æ— åŠŸåŠŸç‡</option>
                                    <option>ç”µå‹-æ— åŠŸä¸‹å‚</option>
                                    <option>æ’ç”µå‹æ§åˆ¶</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å‰Šå³°å¡«è°·é—­ç¯æ§åˆ¶ -->
            <section class="control-section" id="peak-valley-control" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">å‰Šå³°å¡«è°·é—­ç¯æ§åˆ¶</h2>
                    <div class="section-status">
                        <span class="status-dot"></span>
                        <span>é—­ç¯è¿è¡Œä¸­</span>
                    </div>
                </div>
                <div class="section-content">
                    <!-- ç”µä»·æ—¶æ®µè®¾ç½® -->
                    <div class="parameter-group" style="background: white; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
                        <h4 class="parameter-title">ç”µä»·æ—¶æ®µè®¾ç½®</h4>
                        <div class="control-grid" style="margin-top: 1rem;">
                            <div class="control-item">
                                <label class="control-label">å³°æ—¶æ®µ</label>
                                <div class="control-value" style="display: flex; gap: 0.5rem;">
                                    <input type="time" class="control-input" value="10:00" style="width: auto;">
                                    <span>è‡³</span>
                                    <input type="time" class="control-input" value="15:00" style="width: auto;">
                                    <input type="number" class="control-input" value="1.2" step="0.01" style="width: 100px;">
                                    <span class="control-unit">å…ƒ/kWh</span>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">å¹³æ—¶æ®µ</label>
                                <div class="control-value" style="display: flex; gap: 0.5rem;">
                                    <input type="time" class="control-input" value="07:00" style="width: auto;">
                                    <span>è‡³</span>
                                    <input type="time" class="control-input" value="10:00" style="width: auto;">
                                    <input type="number" class="control-input" value="0.8" step="0.01" style="width: 100px;">
                                    <span class="control-unit">å…ƒ/kWh</span>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">è°·æ—¶æ®µ</label>
                                <div class="control-value" style="display: flex; gap: 0.5rem;">
                                    <input type="time" class="control-input" value="23:00" style="width: auto;">
                                    <span>è‡³</span>
                                    <input type="time" class="control-input" value="07:00" style="width: auto;">
                                    <input type="number" class="control-input" value="0.4" step="0.01" style="width: 100px;">
                                    <span class="control-unit">å…ƒ/kWh</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- é—­ç¯æ§åˆ¶å‚æ•° -->
                    <div class="parameter-group" style="background: white; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
                        <h4 class="parameter-title">é—­ç¯æ§åˆ¶å‚æ•°</h4>
                        <div class="control-grid" style="margin-top: 1rem;">
                            <div class="control-item">
                                <label class="control-label">è´Ÿè·é¢„æµ‹ç®—æ³•</label>
                                <div class="control-value">
                                    <select class="control-input">
                                        <option>LSTMç¥ç»ç½‘ç»œ</option>
                                        <option>ARIMAæ—¶åºåˆ†æ</option>
                                        <option>æ··åˆæ™ºèƒ½ç®—æ³•</option>
                                    </select>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">é¢„æµ‹æ—¶é—´çª—å£</label>
                                <div class="control-value">
                                    <input type="number" class="control-input" value="24" min="1" max="168">
                                    <span class="control-unit">å°æ—¶</span>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">æ§åˆ¶å‘¨æœŸ</label>
                                <div class="control-value">
                                    <input type="number" class="control-input" value="15" min="5" max="60">
                                    <span class="control-unit">åˆ†é’Ÿ</span>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">SOCå®‰å…¨è£•åº¦</label>
                                <div class="control-value">
                                    <input type="number" class="control-input" value="10" min="5" max="20">
                                    <span class="control-unit">%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ä¼˜åŒ–ç›®æ ‡ -->
                    <div class="parameter-group" style="background: white; padding: 1.5rem; border-radius: 0.5rem;">
                        <h4 class="parameter-title">ä¼˜åŒ–ç›®æ ‡è®¾ç½®</h4>
                        <div style="margin-top: 1rem;">
                            <label style="display: flex; align-items: center; margin-bottom: 0.75rem; cursor: pointer;">
                                <input type="checkbox" checked style="margin-right: 0.5rem;">
                                <span>æœ€å¤§åŒ–å³°è°·å¥—åˆ©æ”¶ç›Š</span>
                            </label>
                            <label style="display: flex; align-items: center; margin-bottom: 0.75rem; cursor: pointer;">
                                <input type="checkbox" checked style="margin-right: 0.5rem;">
                                <span>æœ€å°åŒ–éœ€é‡ç”µè´¹</span>
                            </label>
                            <label style="display: flex; align-items: center; margin-bottom: 0.75rem; cursor: pointer;">
                                <input type="checkbox" style="margin-right: 0.5rem;">
                                <span>å»¶é•¿ç”µæ± ä½¿ç”¨å¯¿å‘½</span>
                            </label>
                            <label style="display: flex; align-items: center; cursor: pointer;">
                                <input type="checkbox" style="margin-right: 0.5rem;">
                                <span>å‚ä¸ç”µåŠ›è¾…åŠ©æœåŠ¡</span>
                            </label>
                        </div>
                    </div>
                </div>
            </section>

            <!-- å……æ”¾ç”µç­–ç•¥ -->
            <div class="strategy-timeline">
                <div class="timeline-header">
                    <h3 class="section-title">24å°æ—¶å……æ”¾ç”µè®¡åˆ’</h3>
                    <button class="btn btn-secondary" onclick="editStrategy()">
                        <span>âœï¸</span>
                        <span>ç¼–è¾‘ç­–ç•¥</span>
                    </button>
                </div>
                <div class="timeline-chart">
                    <canvas id="strategyChart" style="width: 100%; height: 100%;"></canvas>
                    <div class="time-axis">
                        <span>00:00</span>
                        <span>06:00</span>
                        <span>12:00</span>
                        <span>18:00</span>
                        <span>24:00</span>
                    </div>
                </div>
            </div>

            <!-- VPPè™šæ‹Ÿç”µå‚æ§åˆ¶ -->
            <section class="control-section" id="vpp-control" style="display: none;">
                <div class="section-header">
                    <h2 class="section-title">è™šæ‹Ÿç”µå‚(VPP)æ§åˆ¶</h2>
                    <div class="section-status">
                        <span class="status-dot"></span>
                        <span>å·²æ¥å…¥èšåˆå¹³å°</span>
                    </div>
                </div>
                <div class="section-content">
                    <div class="parameter-group" style="background: white; padding: 1.5rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
                        <h4 class="parameter-title">VPPå‚ä¸è®¾ç½®</h4>
                        <div class="control-grid" style="margin-top: 1rem;">
                            <div class="control-item">
                                <label class="control-label">èšåˆå•†å¹³å°</label>
                                <div class="control-value">
                                    <select class="control-input">
                                        <option>å›½ç½‘è™šæ‹Ÿç”µå‚å¹³å°</option>
                                        <option>å—ç½‘è°ƒåº¦å¹³å°</option>
                                        <option>çœçº§ç”µåŠ›äº¤æ˜“ä¸­å¿ƒ</option>
                                    </select>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">å¯è°ƒåº¦å®¹é‡</label>
                                <div class="control-value">
                                    <input type="number" class="control-input" value="1500">
                                    <span class="control-unit">kW</span>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">å“åº”æ—¶é—´</label>
                                <div class="control-value">
                                    <input type="number" class="control-input" value="30">
                                    <span class="control-unit">ç§’</span>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">å‚ä¸å¸‚åœº</label>
                                <div class="control-value">
                                    <select class="control-input">
                                        <option>è°ƒé¢‘è¾…åŠ©æœåŠ¡</option>
                                        <option>å¤‡ç”¨å®¹é‡å¸‚åœº</option>
                                        <option>ç°è´§ç”µèƒ½å¸‚åœº</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- æ™ºèƒ½è¿ç»´åŠŸèƒ½ -->
            <section class="control-section">
                <div class="section-header">
                    <h2 class="section-title">é˜³å…‰æ™ºèƒ½è¿ç»´</h2>
                </div>
                <div class="section-content">
                    <div class="parameter-group" style="background: white; padding: 1.5rem; border-radius: 0.5rem;">
                        <div class="control-grid">
                            <div class="control-item">
                                <label class="control-label">ç”µæ± å¥åº·åº¦SOH</label>
                                <div class="control-value">
                                    <div style="display: flex; align-items: center; gap: 1rem;">
                                        <div style="flex: 1; background: #e2e8f0; height: 20px; border-radius: 10px; overflow: hidden;">
                                            <div style="width: 96%; height: 100%; background: #22c55e;"></div>
                                        </div>
                                        <span style="font-weight: 600;">96%</span>
                                    </div>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">é¢„è®¡ç»´æŠ¤æ—¶é—´</label>
                                <div class="control-value">
                                    <span style="color: #64748b;">2024å¹´6æœˆ15æ—¥</span>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">AIæ•…éšœé¢„æµ‹</label>
                                <div class="control-value">
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="switch-slider"></span>
                                    </label>
                                </div>
                            </div>
                            <div class="control-item">
                                <label class="control-label">è‡ªåŠ¨å‡è¡¡ä¼˜åŒ–</label>
                                <div class="control-value">
                                    <label class="switch">
                                        <input type="checkbox" checked>
                                        <span class="switch-slider"></span>
                                    </label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- é«˜çº§å‚æ•°è®¾ç½® -->
            <section class="control-section">
                <div class="section-header">
                    <h2 class="section-title">é«˜çº§å‚æ•°è®¾ç½®</h2>
                </div>
                <div class="section-content">
                    <div class="advanced-grid">
                        <div class="parameter-group">
                            <h4 class="parameter-title">å……ç”µå‚æ•°</h4>
                            <div class="parameter-item">
                                <span class="parameter-label">æœ€å¤§å……ç”µåŠŸç‡</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="1725">
                                    <span class="control-unit">kW</span>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <span class="parameter-label">å……ç”µæˆªæ­¢SOC</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="95">
                                    <span class="control-unit">%</span>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <span class="parameter-label">å……ç”µç”µæµé™åˆ¶</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="0.5">
                                    <span class="control-unit">C</span>
                                </div>
                            </div>
                        </div>

                        <div class="parameter-group">
                            <h4 class="parameter-title">æ”¾ç”µå‚æ•°</h4>
                            <div class="parameter-item">
                                <span class="parameter-label">æœ€å¤§æ”¾ç”µåŠŸç‡</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="1725">
                                    <span class="control-unit">kW</span>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <span class="parameter-label">æ”¾ç”µæˆªæ­¢SOC</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="10">
                                    <span class="control-unit">%</span>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <span class="parameter-label">æ”¾ç”µç”µæµé™åˆ¶</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="0.5">
                                    <span class="control-unit">C</span>
                                </div>
                            </div>
                        </div>

                        <div class="parameter-group">
                            <h4 class="parameter-title">ä¿æŠ¤å‚æ•°</h4>
                            <div class="parameter-item">
                                <span class="parameter-label">è¿‡æ¸©ä¿æŠ¤</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="45">
                                    <span class="control-unit">Â°C</span>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <span class="parameter-label">è¿‡æµä¿æŠ¤</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="120">
                                    <span class="control-unit">%</span>
                                </div>
                            </div>
                            <div class="parameter-item">
                                <span class="parameter-label">ç”µå‹åå·®</span>
                                <div class="parameter-value">
                                    <input type="number" class="mini-input" value="10">
                                    <span class="control-unit">%</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="control-actions">
                        <button class="btn btn-primary" onclick="applySettings()">
                            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M13.5 5.5L6.5 12.5L3 9" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            åº”ç”¨è®¾ç½®
                        </button>
                        <button class="btn btn-secondary" onclick="resetSettings()">æ¢å¤é»˜è®¤</button>
                        <button class="btn btn-secondary" onclick="saveTemplate()">ä¿å­˜ä¸ºæ¨¡æ¿</button>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script src="common-scripts.js"></script>
    <script>
        // é˜³å…‰ç”µæºç‰¹å®šåŠŸèƒ½
        let currentMode = 'auto';
        let strategyData = [];

        // é€‰æ‹©è¿è¡Œæ¨¡å¼
        function selectMode(element, mode) {
            document.querySelectorAll('.mode-card').forEach(card => {
                card.classList.remove('active');
            });
            element.classList.add('active');
            currentMode = mode;
            
            // æ ¹æ®æ¨¡å¼è°ƒæ•´å‚æ•°
            updateParametersForMode(mode);
        }

        // æ ¹æ®æ¨¡å¼æ›´æ–°å‚æ•°
        function updateParametersForMode(mode) {
            const modeParams = {
                // é€šç”¨æ¨¡å¼å‚æ•°
                'peak': { maxPower: 1500, socHigh: 90, socLow: 20 },
                'demand': { maxPower: 1725, socHigh: 100, socLow: 5 },
                'backup': { maxPower: 1000, socHigh: 100, socLow: 50 },
                'manual': { maxPower: 1250, socHigh: 95, socLow: 10 },
                // é˜³å…‰ç‰¹è‰²æ¨¡å¼
                'smart': { maxPower: 1725, socHigh: 95, socLow: 10 },
                'vpp': { maxPower: 1725, socHigh: 90, socLow: 15 },
                'string': { maxPower: 1500, socHigh: 95, socLow: 15 }
            };

            const params = modeParams[mode];
            if (params) {
                // æ›´æ–°ç•Œé¢å‚æ•°
                console.log(`åˆ‡æ¢åˆ°${mode}æ¨¡å¼ï¼Œå‚æ•°:`, params);
                
                // æ›´æ–°å‚æ•°æ˜¾ç¤º
                document.querySelectorAll('input[type="number"]').forEach(input => {
                    if (input.value === '1725' || input.value === '1500' || input.value === '1000' || input.value === '1250') {
                        input.value = params.maxPower;
                    }
                });
            }
            
            // æ˜¾ç¤º/éšè—ç‰¹å®šæ¨¡å¼çš„æ§åˆ¶é¢æ¿
            const peakValleyControl = document.getElementById('peak-valley-control');
            const vppControl = document.getElementById('vpp-control');
            
            // éšè—æ‰€æœ‰ç‰¹æ®Šé¢æ¿
            if (peakValleyControl) peakValleyControl.style.display = 'none';
            if (vppControl) vppControl.style.display = 'none';
            
            // æ ¹æ®æ¨¡å¼æ˜¾ç¤ºç›¸åº”é¢æ¿
            if (mode === 'peak') {
                if (peakValleyControl) peakValleyControl.style.display = 'block';
            } else if (mode === 'vpp') {
                if (vppControl) vppControl.style.display = 'block';
            }
        }

        // åº”ç”¨è®¾ç½®
        function applySettings() {
            const settings = {
                mode: currentMode,
                activePower: document.querySelector('input[value="1250"]').value,
                reactivePower: document.querySelector('input[value="0"]').value,
                // ... æ”¶é›†å…¶ä»–å‚æ•°
            };

            console.log('åº”ç”¨è®¾ç½®:', settings);
            alert('è®¾ç½®å·²åº”ç”¨åˆ°é˜³å…‰ç”µæºç³»ç»Ÿ');
        }

        // é‡ç½®è®¾ç½®
        function resetSettings() {
            if (confirm('ç¡®å®šè¦æ¢å¤é»˜è®¤è®¾ç½®å—ï¼Ÿ')) {
                location.reload();
            }
        }

        // ä¿å­˜æ¨¡æ¿
        function saveTemplate() {
            const templateName = prompt('è¯·è¾“å…¥æ¨¡æ¿åç§°:');
            if (templateName) {
                console.log(`ä¿å­˜æ¨¡æ¿: ${templateName}`);
                alert(`æ¨¡æ¿"${templateName}"å·²ä¿å­˜`);
            }
        }

        // ç¼–è¾‘å……æ”¾ç”µç­–ç•¥
        function editStrategy() {
            alert('æ‰“å¼€å……æ”¾ç”µç­–ç•¥ç¼–è¾‘å™¨');
        }

        // å®æ—¶æ•°æ®æ›´æ–°
        function updateRealtimeData() {
            const now = new Date();
            document.getElementById('update-time').textContent = 
                now.toTimeString().split(' ')[0];

            // æ¨¡æ‹Ÿæ•°æ®å˜åŒ–
            const powerValue = 1200 + Math.random() * 100;
            const socValue = 72.8 + (Math.random() - 0.5) * 0.2;
            
            // æ›´æ–°ç•Œé¢æ•°æ®
            // ... å®é™…é¡¹ç›®ä¸­ä»APIè·å–æ•°æ®
        }

        // æ¯5ç§’æ›´æ–°ä¸€æ¬¡æ•°æ®
        setInterval(updateRealtimeData, 5000);

        // åˆå§‹åŒ–å›¾è¡¨
        function initStrategyChart() {
            // ä½¿ç”¨Canvasæˆ–å…¶ä»–å›¾è¡¨åº“ç»˜åˆ¶å……æ”¾ç”µç­–ç•¥
            const canvas = document.getElementById('strategyChart');
            const ctx = canvas.getContext('2d');
            
            // ç®€å•çš„å……æ”¾ç”µç¤ºæ„å›¾
            ctx.fillStyle = '#ff6b00';
            ctx.fillRect(0, 50, 100, 50); // å……ç”µæ—¶æ®µ
            ctx.fillStyle = '#22c55e';
            ctx.fillRect(150, 100, 100, 50); // æ”¾ç”µæ—¶æ®µ
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
            initStrategyChart();
            updateRealtimeData();
        });
    </script>
</body>
</html>