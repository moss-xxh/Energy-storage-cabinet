<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§’è‰²ç®¡ç† - å·¥å•†å‚¨èƒ½ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../sidebar.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #f3f4f6;
            color: #1f2937;
        }

        .content {
            padding: 2rem;
        }

        .page-header {
            margin-bottom: 2rem;
        }

        .page-header h1 {
            font-size: 2rem;
            font-weight: 700;
            color: #1f2937;
            margin-bottom: 0.5rem;
        }
        
        .role-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .role-card {
            background: white;
            border-radius: 8px;
            padding: 1.5rem;
            box-shadow: 0 1px 3px rgba(0,0,0,0.1);
            border-left: 4px solid #3b82f6;
        }

        .role-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .role-name {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
        }

        .role-users {
            font-size: 14px;
            color: #64748b;
            background: #f1f5f9;
            padding: 4px 8px;
            border-radius: 12px;
        }

        .role-description {
            color: #64748b;
            margin-bottom: 1.5rem;
            line-height: 1.5;
        }

        .permissions-section {
            margin-bottom: 1.5rem;
        }

        .permissions-title {
            font-size: 14px;
            font-weight: 600;
            color: #374151;
            margin-bottom: 0.75rem;
        }

        .permissions-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .permission-tag {
            background: #eff6ff;
            color: #1d4ed8;
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 12px;
            font-weight: 500;
        }

        .role-actions {
            display: flex;
            gap: 0.5rem;
            justify-content: flex-end;
        }

        .btn-action {
            padding: 6px 12px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-edit {
            background: #dbeafe;
            color: #1d4ed8;
        }

        .btn-copy {
            background: #f3e8ff;
            color: #7c3aed;
        }

        .btn-delete {
            background: #fee2e2;
            color: #dc2626;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 6px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .btn-primary {
            background: #3b82f6;
            color: white;
        }

        .btn-secondary {
            background: #e5e7eb;
            color: #374151;
        }

        .role-header-main {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .permission-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-header {
            padding: 1.5rem;
            border-bottom: 1px solid #e5e7eb;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-body {
            padding: 1.5rem;
        }

        .permission-group {
            margin-bottom: 2rem;
        }

        .group-title {
            font-size: 1rem;
            font-weight: 600;
            color: #374151;
            margin-bottom: 1rem;
            padding-bottom: 0.5rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .permission-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 0;
            border-bottom: 1px solid #f1f5f9;
        }

        .permission-item:last-child {
            border-bottom: none;
        }

        .permission-info {
            flex: 1;
        }

        .permission-name {
            font-weight: 500;
            color: #1e293b;
            margin-bottom: 0.25rem;
        }

        .permission-desc {
            font-size: 14px;
            color: #64748b;
        }

        .permission-toggle {
            position: relative;
            width: 48px;
            height: 24px;
            background: #d1d5db;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.3s ease;
        }

        .permission-toggle.active {
            background: #3b82f6;
        }

        .toggle-slider {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.3s ease;
        }

        .permission-toggle.active .toggle-slider {
            transform: translateX(24px);
        }

        .form-actions {
            display: flex;
            gap: 1rem;
            justify-content: flex-end;
            margin-top: 2rem;
            padding-top: 1rem;
            border-top: 1px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <!-- ä¾§è¾¹æ å®¹å™¨ -->
    <div id="sidebar-container"></div>
<div class="main-content">

                <!-- é¡¶éƒ¨å¯¼èˆªæ  -->
        <nav class="navbar">
            <div class="navbar-left">
                <button class="nav-button" onclick="toggleSidebar()">
                    <span>â˜°</span>
                </button>
                <button class="nav-button" onclick="goBack()" title="è¿”å›åœºæ™¯é€‰æ‹©">
                    <span>â†</span>
                </button>
                <h1 class="page-title">è§’è‰²ç®¡ç†</h1>
            </div>
            <div class="navbar-right">
                <button class="nav-button" onclick="toggleLanguage()">
                    <span>ğŸŒ</span>
                    <span id="lang-text">ä¸­æ–‡</span>
                </button>
                <button class="nav-button" onclick="toggleTheme()">
                    <span id="theme-icon">ğŸŒ™</span>
                </button>
                <button class="nav-button">
                    <span>ğŸ‘¤</span>
                    <span>ç®¡ç†å‘˜</span>
                </button>
            </div>
        </nav>

<div class="content">
            <div class="page-content">
                <div class="page-header">
                    <h1>è§’è‰²ç®¡ç†</h1>
                    <p>ç³»ç»Ÿè§’è‰²ä¸æƒé™ç®¡ç†</p>
                </div>

                <div class="role-header-main">
                    <h2>ç³»ç»Ÿè§’è‰²</h2>
                    <button class="btn btn-primary" onclick="showCreateRoleModal()">åˆ›å»ºè§’è‰²</button>
                </div>

                <div class="role-grid">
                    <!-- ç®¡ç†å‘˜è§’è‰² -->
                    <div class="role-card">
                        <div class="role-header">
                            <h3 class="role-name">ç³»ç»Ÿç®¡ç†å‘˜</h3>
                            <span class="role-users">4 ç”¨æˆ·</span>
                        </div>
                        <p class="role-description">æ‹¥æœ‰ç³»ç»Ÿæœ€é«˜æƒé™ï¼Œå¯ä»¥ç®¡ç†æ‰€æœ‰åŠŸèƒ½æ¨¡å—å’Œç”¨æˆ·è´¦æˆ·</p>
                        
                        <div class="permissions-section">
                            <div class="permissions-title">ä¸»è¦æƒé™</div>
                            <div class="permissions-list">
                                <span class="permission-tag">ç”¨æˆ·ç®¡ç†</span>
                                <span class="permission-tag">ç³»ç»Ÿè®¾ç½®</span>
                                <span class="permission-tag">æ•°æ®ç®¡ç†</span>
                                <span class="permission-tag">æŠ¥è¡¨å¯¼å‡º</span>
                                <span class="permission-tag">è®¾å¤‡æ§åˆ¶</span>
                            </div>
                        </div>

                        <div class="role-actions">
                            <button class="btn-action btn-edit" onclick="editRole('admin')">ç¼–è¾‘</button>
                            <button class="btn-action btn-copy" onclick="copyRole('admin')">å¤åˆ¶</button>
                        </div>
                    </div>

                    <!-- æ“ä½œå‘˜è§’è‰² -->
                    <div class="role-card">
                        <div class="role-header">
                            <h3 class="role-name">ç³»ç»Ÿæ“ä½œå‘˜</h3>
                            <span class="role-users">12 ç”¨æˆ·</span>
                        </div>
                        <p class="role-description">è´Ÿè´£æ—¥å¸¸è¿ç»´æ“ä½œï¼Œå¯ä»¥ç›‘æ§è®¾å¤‡çŠ¶æ€ã€å¤„ç†å‘Šè­¦ã€ç”ŸæˆæŠ¥è¡¨</p>
                        
                        <div class="permissions-section">
                            <div class="permissions-title">ä¸»è¦æƒé™</div>
                            <div class="permissions-list">
                                <span class="permission-tag">è®¾å¤‡ç›‘æ§</span>
                                <span class="permission-tag">å‘Šè­¦å¤„ç†</span>
                                <span class="permission-tag">æ•°æ®æŸ¥çœ‹</span>
                                <span class="permission-tag">æŠ¥è¡¨ç”Ÿæˆ</span>
                            </div>
                        </div>

                        <div class="role-actions">
                            <button class="btn-action btn-edit" onclick="editRole('operator')">ç¼–è¾‘</button>
                            <button class="btn-action btn-copy" onclick="copyRole('operator')">å¤åˆ¶</button>
                            <button class="btn-action btn-delete" onclick="deleteRole('operator')">åˆ é™¤</button>
                        </div>
                    </div>

                    <!-- æŸ¥çœ‹è€…è§’è‰² -->
                    <div class="role-card">
                        <div class="role-header">
                            <h3 class="role-name">æ•°æ®æŸ¥çœ‹è€…</h3>
                            <span class="role-users">8 ç”¨æˆ·</span>
                        </div>
                        <p class="role-description">ä»…å¯æŸ¥çœ‹æ•°æ®å’ŒæŠ¥è¡¨ï¼Œä¸èƒ½è¿›è¡Œä»»ä½•æ“ä½œæˆ–ä¿®æ”¹</p>
                        
                        <div class="permissions-section">
                            <div class="permissions-title">ä¸»è¦æƒé™</div>
                            <div class="permissions-list">
                                <span class="permission-tag">æ•°æ®æŸ¥çœ‹</span>
                                <span class="permission-tag">æŠ¥è¡¨æŸ¥çœ‹</span>
                                <span class="permission-tag">è®¾å¤‡çŠ¶æ€æŸ¥çœ‹</span>
                            </div>
                        </div>

                        <div class="role-actions">
                            <button class="btn-action btn-edit" onclick="editRole('viewer')">ç¼–è¾‘</button>
                            <button class="btn-action btn-copy" onclick="copyRole('viewer')">å¤åˆ¶</button>
                            <button class="btn-action btn-delete" onclick="deleteRole('viewer')">åˆ é™¤</button>
                        </div>
                    </div>

                    <!-- ç»´æŠ¤å·¥ç¨‹å¸ˆè§’è‰² -->
                    <div class="role-card">
                        <div class="role-header">
                            <h3 class="role-name">ç»´æŠ¤å·¥ç¨‹å¸ˆ</h3>
                            <span class="role-users">6 ç”¨æˆ·</span>
                        </div>
                        <p class="role-description">è´Ÿè´£è®¾å¤‡ç»´æŠ¤å’Œæ•…éšœå¤„ç†ï¼Œå¯ä»¥è¿›è¡Œè®¾å¤‡æ§åˆ¶å’Œå›ºä»¶æ›´æ–°</p>
                        
                        <div class="permissions-section">
                            <div class="permissions-title">ä¸»è¦æƒé™</div>
                            <div class="permissions-list">
                                <span class="permission-tag">è®¾å¤‡æ§åˆ¶</span>
                                <span class="permission-tag">å›ºä»¶ç®¡ç†</span>
                                <span class="permission-tag">ç»´æŠ¤è®°å½•</span>
                                <span class="permission-tag">å‘Šè­¦å¤„ç†</span>
                            </div>
                        </div>

                        <div class="role-actions">
                            <button class="btn-action btn-edit" onclick="editRole('engineer')">ç¼–è¾‘</button>
                            <button class="btn-action btn-copy" onclick="copyRole('engineer')">å¤åˆ¶</button>
                            <button class="btn-action btn-delete" onclick="deleteRole('engineer')">åˆ é™¤</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- æƒé™ç¼–è¾‘æ¨¡æ€æ¡† -->
    <div id="permission-modal" class="permission-modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modal-title">ç¼–è¾‘è§’è‰²æƒé™</h3>
                <button onclick="closeModal()" style="background: none; border: none; font-size: 24px; cursor: pointer;">&times;</button>
            </div>
            <div class="modal-body">
                <div class="permission-group">
                    <h4 class="group-title">è®¾å¤‡ç®¡ç†</h4>
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name">è®¾å¤‡ç›‘æ§</div>
                            <div class="permission-desc">æŸ¥çœ‹è®¾å¤‡å®æ—¶çŠ¶æ€å’Œæ•°æ®</div>
                        </div>
                        <div class="permission-toggle active" onclick="togglePermission(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name">è®¾å¤‡æ§åˆ¶</div>
                            <div class="permission-desc">è¿œç¨‹æ§åˆ¶è®¾å¤‡å¯åœå’Œå‚æ•°è°ƒèŠ‚</div>
                        </div>
                        <div class="permission-toggle" onclick="togglePermission(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name">å›ºä»¶ç®¡ç†</div>
                            <div class="permission-desc">è®¾å¤‡å›ºä»¶å‡çº§å’Œç‰ˆæœ¬ç®¡ç†</div>
                        </div>
                        <div class="permission-toggle" onclick="togglePermission(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>

                <div class="permission-group">
                    <h4 class="group-title">æ•°æ®åˆ†æ</h4>
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name">æ•°æ®æŸ¥çœ‹</div>
                            <div class="permission-desc">æŸ¥çœ‹ç³»ç»Ÿå„ç±»æ•°æ®å’Œç»Ÿè®¡ä¿¡æ¯</div>
                        </div>
                        <div class="permission-toggle active" onclick="togglePermission(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name">æ•°æ®å¯¼å‡º</div>
                            <div class="permission-desc">å¯¼å‡ºæ•°æ®æŠ¥è¡¨å’Œåˆ†æç»“æœ</div>
                        </div>
                        <div class="permission-toggle" onclick="togglePermission(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>

                <div class="permission-group">
                    <h4 class="group-title">ç³»ç»Ÿç®¡ç†</h4>
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name">ç”¨æˆ·ç®¡ç†</div>
                            <div class="permission-desc">ç®¡ç†ç³»ç»Ÿç”¨æˆ·è´¦æˆ·å’Œæƒé™</div>
                        </div>
                        <div class="permission-toggle" onclick="togglePermission(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                    <div class="permission-item">
                        <div class="permission-info">
                            <div class="permission-name">ç³»ç»Ÿè®¾ç½®</div>
                            <div class="permission-desc">ä¿®æ”¹ç³»ç»Ÿé…ç½®å’Œå‚æ•°</div>
                        </div>
                        <div class="permission-toggle" onclick="togglePermission(this)">
                            <div class="toggle-slider"></div>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button class="btn btn-secondary" onclick="closeModal()">å–æ¶ˆ</button>
                    <button class="btn btn-primary" onclick="savePermissions()">ä¿å­˜æƒé™</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', function() {
        });

        // æ˜¾ç¤ºåˆ›å»ºè§’è‰²æ¨¡æ€æ¡†
        function showCreateRoleModal() {
            document.getElementById('modal-title').textContent = 'åˆ›å»ºæ–°è§’è‰²';
            document.getElementById('permission-modal').style.display = 'flex';
        }

        // ç¼–è¾‘è§’è‰²
        function editRole(roleId) {
            document.getElementById('modal-title').textContent = `ç¼–è¾‘è§’è‰²æƒé™ - ${roleId}`;
            document.getElementById('permission-modal').style.display = 'flex';
            console.log(`ç¼–è¾‘è§’è‰²: ${roleId}`);
        }

        // å¤åˆ¶è§’è‰²
        function copyRole(roleId) {
            console.log(`å¤åˆ¶è§’è‰²: ${roleId}`);
            showMessage(`è§’è‰² ${roleId} å·²å¤åˆ¶`, 'success');
        }

        // åˆ é™¤è§’è‰²
        function deleteRole(roleId) {
            if (confirm(`ç¡®å®šè¦åˆ é™¤è§’è‰² ${roleId} å—ï¼Ÿ`)) {
                console.log(`åˆ é™¤è§’è‰²: ${roleId}`);
                showMessage(`è§’è‰² ${roleId} å·²åˆ é™¤`, 'success');
            }
        }

        // åˆ‡æ¢æƒé™
        function togglePermission(toggle) {
            toggle.classList.toggle('active');
        }

        // ä¿å­˜æƒé™
        function savePermissions() {
            const permissions = [];
            document.querySelectorAll('.permission-toggle.active').forEach(toggle => {
                const permissionItem = toggle.closest('.permission-item');
                const permissionName = permissionItem.querySelector('.permission-name').textContent;
                permissions.push(permissionName);
            });
            
            console.log('ä¿å­˜æƒé™:', permissions);
            showMessage('æƒé™è®¾ç½®å·²ä¿å­˜', 'success');
            closeModal();
        }

        // å…³é—­æ¨¡æ€æ¡†
        function closeModal() {
            document.getElementById('permission-modal').style.display = 'none';
        }

        // æ¨¡æ€æ¡†å¤–ç‚¹å‡»å…³é—­
        document.getElementById('permission-modal').addEventListener('click', function(e) {
            if (e.target === this) {
                closeModal();
            }
        });
    </script>

    <!-- å¼•å…¥ä¾§è¾¹æ è„šæœ¬ -->
    <script src="../sidebar.js"></script>

    <style>
        /* ç§»åŠ¨ç«¯èœå•æŒ‰é’®æ ·å¼ */
        @media (max-width: 768px) {
            .menu-toggle {
                display: block !important;
            }
        }
    
        /* é¡¶éƒ¨å¯¼èˆªæ  */
        .navbar {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 0 2rem;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .navbar-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .page-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-button {
            padding: 0.5rem 1rem;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: #64748b;
            transition: all 150ms ease;
        }

        .nav-button:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
            color: #1e293b;
        }
    </style>
</body>
</html>