<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>电价设置 - 能源管理系统</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: #EBEDF5;
            color: #1e293b;
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* 侧边栏样式 */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 240px;
            height: 100vh;
            background: white;
            border-right: 1px solid #e2e8f0;
            display: flex;
            flex-direction: column;
            transition: all 300ms ease;
            z-index: 100;
        }

        .sidebar-header {
            padding: 1rem 0.5rem;
            border-bottom: 1px solid #e2e8f0;
            background: rgba(255, 255, 255, 0.03);
        }

        .logo {
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.125rem;
            font-weight: 600;
            color: #1e293b;
        }

        .logo img {
            height: auto;
            width: 100%;
            max-width: 220px;
            max-height: 50px;
            object-fit: contain;
        }

        .sidebar-menu {
            flex: 1;
            padding: 1rem 0;
            overflow-y: auto;
        }

        .menu-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem;
            color: #64748b;
            text-decoration: none;
            transition: all 0.2s ease;
            position: relative;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .menu-item:hover {
            background: #f1f5f9;
            color: #1e293b;
        }

        .menu-item.active {
            background: #eff6ff;
            color: #3562E3;
        }

        .menu-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: #3562E3;
        }

        /* 一级菜单样式 */
        .menu-group {
            margin-bottom: 0;
        }
        
        .menu-parent {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0.75rem 1.5rem;
            color: #64748b;
            text-decoration: none;
            transition: all 0.2s ease;
            cursor: pointer;
            font-size: 0.875rem;
            font-weight: 500;
            position: relative;
        }
        
        .menu-parent:hover {
            background: #f1f5f9;
            color: #1e293b;
        }
        
        .menu-parent.expanded {
            background: transparent;
            color: #3562E3;
        }
        
        .menu-arrow {
            transition: transform 0.2s ease;
            font-size: 0.75rem;
            color: #94a3b8;
        }
        
        .menu-parent.expanded .menu-arrow {
            transform: rotate(90deg);
            color: #64748b;
        }
        
        /* 二级菜单样式 */
        .submenu {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
            background: transparent;
        }
        
        .submenu.open {
            max-height: 300px;
        }
        
        .submenu-item {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            padding: 0.75rem 1.5rem 0.75rem 3rem;
            color: #64748b;
            text-decoration: none;
            transition: all 0.2s ease;
            font-size: 0.875rem;
            position: relative;
        }
        
        .submenu-item:hover {
            background: #f1f5f9;
            color: #1e293b;
        }
        
        .submenu-item.active {
            background: #eff6ff;
            color: #3562E3;
        }
        
        .submenu-item.active::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            width: 3px;
            height: 100%;
            background: #3562E3;
        }

        .menu-icon {
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }
        
        .menu-icon svg {
            width: 100%;
            height: 100%;
        }

        /* 主内容区域 */
        .main-content {
            margin-left: 240px;
            min-height: 100vh;
            background: #EBEDF5;
        }

        /* 顶部导航栏 */
        .navbar {
            background: white;
            border-bottom: 1px solid #e2e8f0;
            padding: 0 2rem;
            height: 64px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 50;
        }

        .navbar-left {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .page-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: #1e293b;
        }

        .navbar-right {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .nav-button {
            padding: 0.5rem 1rem;
            border: 1px solid #e2e8f0;
            background: white;
            border-radius: 0.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 0.875rem;
            color: #64748b;
            transition: all 150ms ease;
        }

        .nav-button:hover {
            background: #f8fafc;
            border-color: #cbd5e1;
            color: #1e293b;
        }


        /* 内容区域 */
        .content {
            flex: 1;
            padding: 2rem;
        }

        /* Tab切换 - 与数据分析保持一致 */
        .price-tabs {
            display: flex;
            gap: 0;
            margin-bottom: 2rem;
            border-bottom: 2px solid #e2e8f0;
            padding-bottom: -2px;
        }

        .tab-button {
            padding: 0.75rem 1.5rem;
            border: none;
            background: none;
            cursor: pointer;
            color: #64748b;
            font-weight: 500;
            transition: all 150ms ease;
            position: relative;
            border-bottom: 2px solid transparent;
            margin-bottom: -2px;
        }

        .tab-button:hover {
            color: #1e293b;
        }

        .tab-button.active {
            color: #3562E3;
            border-bottom-color: #3562E3;
        }

        /* 电价设置内容 */
        .price-content {
            background: white;
            border-radius: 0.75rem;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
            padding: 2rem;
        }

        .station-selector {
            margin-bottom: 2rem;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            display: block;
            font-size: 0.875rem;
            font-weight: 500;
            color: #374151;
            margin-bottom: 0.5rem;
        }

        .form-select {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            background: white;
            color: #1e293b;
            transition: all 0.2s ease;
            cursor: pointer;
            height: 42px;
        }

        .form-select:focus {
            outline: none;
            border-color: #3562E3;
            box-shadow: 0 0 0 3px rgba(53, 98, 227, 0.1);
        }

        .form-input {
            width: 100%;
            padding: 0.75rem 1rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            background: white;
            color: #1e293b;
            transition: all 0.2s ease;
            height: 42px;
        }

        .form-input:focus {
            outline: none;
            border-color: #3562E3;
            box-shadow: 0 0 0 3px rgba(53, 98, 227, 0.1);
        }

        /* 电价模板卡片 */
        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }

        .template-card {
            background: #f8fafc;
            border: 2px solid transparent;
            border-radius: 0.75rem;
            padding: 1.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .template-card:hover {
            border-color: #cbd5e1;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .template-card.selected {
            border-color: #3562E3;
            background: #eff6ff;
        }

        .template-title {
            font-size: 1rem;
            font-weight: 600;
            color: #1e293b;
            margin-bottom: 0.5rem;
        }

        .template-description {
            font-size: 0.875rem;
            color: #64748b;
            line-height: 1.5;
        }

        /* 时间段设置 */
        .time-period-section {
            background: #f8fafc;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .time-period-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }

        .time-period-title {
            font-size: 0.875rem;
            font-weight: 600;
            color: #1e293b;
        }

        .time-slots {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }

        .time-slot {
            display: grid;
            grid-template-columns: 1fr 1fr 120px auto;
            gap: 1rem;
            align-items: center;
        }

        .time-input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            font-size: 0.875rem;
        }

        .price-input {
            width: 100%;
            padding: 0.5rem 0.75rem;
            border: 1px solid #e2e8f0;
            border-radius: 0.375rem;
            font-size: 0.875rem;
            text-align: right;
        }

        /* 按钮样式 */
        .btn {
            padding: 0.5rem 1rem;
            border: none;
            border-radius: 0.5rem;
            font-size: 0.875rem;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.2s ease;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
        }

        .btn-primary {
            background: #3562E3;
            color: white;
        }

        .btn-primary:hover {
            background: #2951d9;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        .btn-secondary {
            background: white;
            color: #374151;
            border: 1px solid #d1d5db;
        }

        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #9ca3af;
        }

        .btn-text {
            background: transparent;
            color: #3562E3;
            padding: 0.5rem;
        }

        .btn-text:hover {
            background: #eff6ff;
        }

        .btn-danger {
            background: transparent;
            color: #ef4444;
            padding: 0.5rem;
        }

        .btn-danger:hover {
            background: #fee2e2;
        }

        .btn-icon {
            padding: 0.5rem;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* 有效期设置 */
        .validity-section {
            background: #f8fafc;
            border-radius: 0.5rem;
            padding: 1.5rem;
            margin-bottom: 2rem;
        }

        .switch-container {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            margin-bottom: 1rem;
        }

        .switch {
            position: relative;
            width: 44px;
            height: 24px;
            background: #e2e8f0;
            border-radius: 12px;
            cursor: pointer;
            transition: background 0.2s ease;
        }

        .switch.active {
            background: #3562E3;
        }

        .switch-thumb {
            position: absolute;
            top: 2px;
            left: 2px;
            width: 20px;
            height: 20px;
            background: white;
            border-radius: 50%;
            transition: transform 0.2s ease;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .switch.active .switch-thumb {
            transform: translateX(20px);
        }

        .date-range-inputs {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 1rem;
        }

        /* 操作栏 */
        .action-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 2rem;
            border-top: 1px solid #e2e8f0;
            margin-top: 2rem;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
            }

            .sidebar.open {
                transform: translateX(0);
            }

            .main-content {
                margin-left: 0;
            }

            .template-grid {
                grid-template-columns: 1fr;
            }

            .time-slot {
                grid-template-columns: 1fr;
            }
        }

        /* 暗色主题 */
        [data-theme="dark"] {
            background: #0f172a;
            color: #e2e8f0;
        }

        [data-theme="dark"] body {
            background: #0f172a;
            color: #e2e8f0;
        }

        [data-theme="dark"] .sidebar {
            background: #1e293b;
            border-color: #334155;
        }

        [data-theme="dark"] .navbar {
            background: #1e293b;
            border-color: #334155;
        }

        [data-theme="dark"] .page-header {
            background: #1e293b;
            border-color: #334155;
        }

        [data-theme="dark"] .content-wrapper {
            background: #0f172a;
        }

        [data-theme="dark"] .price-content {
            background: #1e293b;
            box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.3);
        }

        [data-theme="dark"] .template-card {
            background: #334155;
        }

        [data-theme="dark"] .template-card.selected {
            background: #1e3a8a;
        }

        [data-theme="dark"] .time-period-section,
        [data-theme="dark"] .validity-section {
            background: #334155;
        }

        [data-theme="dark"] .form-select,
        [data-theme="dark"] .form-input,
        [data-theme="dark"] .time-input,
        [data-theme="dark"] .price-input {
            background: #334155;
            border-color: #475569;
            color: #f1f5f9;
        }

        [data-theme="dark"] .menu-parent {
            color: #cbd5e1;
        }
        
        [data-theme="dark"] .menu-parent:hover {
            background: #334155;
            color: #f1f5f9;
        }
        
        [data-theme="dark"] .menu-parent.expanded {
            background: transparent;
            color: #60a5fa;
        }
        
        [data-theme="dark"] .menu-arrow {
            color: #64748b;
        }
        
        [data-theme="dark"] .menu-parent.expanded .menu-arrow {
            color: #60a5fa;
        }
        
        [data-theme="dark"] .submenu {
            background: transparent;
        }
        
        [data-theme="dark"] .submenu-item {
            color: #cbd5e1;
        }
        
        [data-theme="dark"] .submenu-item:hover {
            background: #334155;
            color: #f1f5f9;
        }
        
        [data-theme="dark"] .submenu-item.active {
            background: #1e3a8a;
            color: #60a5fa;
        }

        [data-theme="dark"] .menu-item {
            color: #cbd5e1;
        }

        [data-theme="dark"] .menu-item:hover {
            background: #334155;
            color: #f1f5f9;
        }

        [data-theme="dark"] .menu-item.active {
            background: #1e3a8a;
            color: #60a5fa;
        }
    </style>
</head>
<body>
    <!-- 侧边栏 -->
    <aside class="sidebar" id="sidebar">
        <div class="sidebar-header">
            <div class="logo">
                <img src="../logo.png" alt="AlwaysControl Technology Logo">
            </div>
        </div>
        <nav class="sidebar-menu">
            <!-- 电站管理（带二级菜单） -->
            <div class="menu-group">
                <div class="menu-parent expanded" onclick="toggleSubmenu(this)">
                    <div style="display: flex; align-items: center; gap: 0.75rem;">
                        <span class="menu-icon">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                            </svg>
                        </span>
                        <span class="i18n" data-i18n="menu.station">电站</span>
                    </div>
                    <span class="menu-arrow">▶</span>
                </div>
                <div class="submenu open">
                    <a href="./station-management.html" class="submenu-item">
                        <span class="i18n" data-i18n="menu.stationManagement">电站管理</span>
                    </a>
                    <a href="#" class="submenu-item active">
                        <span class="i18n" data-i18n="menu.priceSettings">电价设置</span>
                    </a>
                </div>
            </div>
            
            <!-- 其他一级菜单 -->
            <a href="./data-analysis.html" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 3v18h18"/>
                        <path d="M18.7 8l-5.1 5.2-2.8-2.7L7 14.3"/>
                    </svg>
                </span>
                <span class="i18n" data-i18n="menu.analysis">数据分析</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"/>
                        <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
                    </svg>
                </span>
                <span class="i18n" data-i18n="menu.alarm">告警管理</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
                        <path d="M20.5 7.5L16 12l4.5 4.5M3.5 7.5L8 12l-4.5 4.5"/>
                    </svg>
                </span>
                <span class="i18n" data-i18n="menu.device">设备管理</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                        <circle cx="9" cy="7" r="4"/>
                        <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                        <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                    </svg>
                </span>
                <span class="i18n" data-i18n="menu.user">用户管理</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                        <polyline points="14 2 14 8 20 8"/>
                        <line x1="16" y1="13" x2="8" y2="13"/>
                        <line x1="16" y1="17" x2="8" y2="17"/>
                        <polyline points="10 9 9 9 8 9"/>
                    </svg>
                </span>
                <span class="i18n" data-i18n="menu.report">报表中心</span>
            </a>
            <a href="#" class="menu-item">
                <span class="menu-icon">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="3"/>
                        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"/>
                    </svg>
                </span>
                <span class="i18n" data-i18n="menu.setting">系统设置</span>
            </a>
        </nav>
    </aside>

    <!-- 主内容区域 -->
    <main class="main-content">
        <!-- 顶部导航栏 -->
        <nav class="navbar">
            <div class="navbar-left">
                <button class="nav-button" onclick="toggleSidebar()">
                    <span>☰</span>
                </button>
                <button class="nav-button" onclick="goBack()" title="返回场景选择">
                    <span>←</span>
                </button>
                <h1 class="page-title i18n" data-i18n="page.title">电价设置</h1>
            </div>
            <div class="navbar-right">
                <button class="nav-button" onclick="toggleLanguage()">
                    <span>🌐</span>
                    <span id="lang-text">中文</span>
                </button>
                <button class="nav-button" onclick="toggleTheme()">
                    <span id="theme-icon">🌙</span>
                </button>
                <button class="nav-button">
                    <span>👤</span>
                    <span>管理员</span>
                </button>
            </div>
        </nav>

        <!-- 内容区域 -->
        <div class="content">
            <!-- Tab切换 -->
            <div class="price-tabs">
                <button class="tab-button active" onclick="switchTab('feed-in')">
                    <span class="i18n" data-i18n="price.feedIn">上网电价</span>
                </button>
                <button class="tab-button" onclick="switchTab('purchase')">
                    <span class="i18n" data-i18n="price.purchase">购电电价</span>
                </button>
            </div>

            <!-- 上网电价内容 -->
            <div id="feed-in-content" class="price-content">
                <!-- 电站选择 -->
                <div class="station-selector">
                    <div class="form-group">
                        <label class="form-label i18n" data-i18n="price.selectStation">选择电站</label>
                        <select class="form-select" id="station-select">
                            <option value="">请选择电站</option>
                            <option value="station1">上海工业园储能站</option>
                            <option value="station2">北京科技园储能站</option>
                            <option value="station3">深圳光伏储能站</option>
                        </select>
                    </div>
                </div>

                <!-- 电价类型选择 -->
                <div class="form-group">
                    <label class="form-label i18n" data-i18n="price.priceType">电价类型</label>
                    <div class="template-grid">
                        <div class="template-card selected" onclick="selectPriceType(this, 'fixed')">
                            <h3 class="template-title i18n" data-i18n="price.fixed">固定电价</h3>
                            <p class="template-description i18n" data-i18n="price.fixedDesc">所有时间段的电价一致</p>
                        </div>
                        <div class="template-card" onclick="selectPriceType(this, 'volume')">
                            <h3 class="template-title i18n" data-i18n="price.volume">按电量定价</h3>
                            <p class="template-description i18n" data-i18n="price.volumeDesc">可分别设置不同时间段内阶梯电量的电价</p>
                        </div>
                        <div class="template-card" onclick="selectPriceType(this, 'time')">
                            <h3 class="template-title i18n" data-i18n="price.time">分时电价</h3>
                            <p class="template-description i18n" data-i18n="price.timeDesc">可设置多个时间段的电价，各时间段不可重叠</p>
                        </div>
                        <div class="template-card" onclick="selectPriceType(this, 'timeWeekend')">
                            <h3 class="template-title i18n" data-i18n="price.timeWeekend">分时电价（工作日+周末）</h3>
                            <p class="template-description i18n" data-i18n="price.timeWeekendDesc">可分别设置工作日与周末不同时间段的电价</p>
                        </div>
                    </div>
                </div>

                <!-- 有效期设置 -->
                <div class="validity-section">
                    <h3 class="form-label i18n" data-i18n="price.validity">有效期设置</h3>
                    <div class="switch-container">
                        <label class="form-label i18n" data-i18n="price.permanent">永久生效</label>
                        <div class="switch active" onclick="toggleSwitch(this)">
                            <div class="switch-thumb"></div>
                        </div>
                    </div>
                    <div class="date-range-inputs" id="validity-dates" style="display: none;">
                        <div class="form-group">
                            <label class="form-label i18n" data-i18n="price.startDate">开始日期</label>
                            <input type="date" class="form-input" id="start-date">
                        </div>
                        <div class="form-group">
                            <label class="form-label i18n" data-i18n="price.endDate">结束日期</label>
                            <input type="date" class="form-input" id="end-date">
                        </div>
                    </div>
                </div>

                <!-- 固定电价设置 -->
                <div id="fixed-price-settings">
                    <div class="form-group">
                        <label class="form-label i18n" data-i18n="price.fixedPriceValue">固定电价值</label>
                        <div style="display: flex; gap: 1rem; align-items: center;">
                            <input type="number" class="form-input" id="fixed-price" placeholder="请输入电价" step="0.01" style="max-width: 200px;">
                            <span class="form-label">元/kWh</span>
                        </div>
                    </div>
                </div>

                <!-- 分时电价设置 -->
                <div id="time-price-settings" style="display: none;">
                    <div class="time-period-section">
                        <div class="time-period-header">
                            <h3 class="time-period-title i18n" data-i18n="price.timePeriods">时间段设置</h3>
                            <button class="btn btn-text" onclick="addTimePeriod()">
                                <span>+</span>
                                <span class="i18n" data-i18n="price.addPeriod">添加时段</span>
                            </button>
                        </div>
                        <div class="time-slots" id="time-slots">
                            <div class="time-slot">
                                <input type="time" class="time-input" value="00:00">
                                <input type="time" class="time-input" value="08:00">
                                <input type="number" class="price-input" placeholder="电价" step="0.01">
                                <button class="btn btn-icon btn-danger" onclick="removeTimeSlot(this)">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <line x1="18" y1="6" x2="6" y2="18"></line>
                                        <line x1="6" y1="6" x2="18" y2="18"></line>
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 操作按钮 -->
                <div class="action-bar">
                    <button class="btn btn-secondary" onclick="applyToOtherStations()">
                        <span class="i18n" data-i18n="price.applyToOthers">应用到其他电站</span>
                    </button>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-secondary" onclick="cancelPriceSettings()">
                            <span class="i18n" data-i18n="btn.cancel">取消</span>
                        </button>
                        <button class="btn btn-primary" onclick="savePriceSettings()">
                            <span class="i18n" data-i18n="btn.save">保存</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- 购电电价内容 -->
            <div id="purchase-content" class="price-content" style="display: none;">
                <!-- 内容与上网电价类似，可以根据需要调整 -->
                <div class="station-selector">
                    <div class="form-group">
                        <label class="form-label i18n" data-i18n="price.selectStation">选择电站</label>
                        <select class="form-select" id="purchase-station-select">
                            <option value="">请选择电站</option>
                            <option value="station1">上海工业园储能站</option>
                            <option value="station2">北京科技园储能站</option>
                            <option value="station3">深圳光伏储能站</option>
                        </select>
                    </div>
                </div>

                <button class="btn btn-primary" style="margin-bottom: 2rem;" onclick="addNewPrice()">
                    <span>+</span>
                    <span class="i18n" data-i18n="price.addNew">新增电价</span>
                </button>

                <!-- 组合电价/简单电价选择 -->
                <div class="form-group">
                    <label class="form-label i18n" data-i18n="price.priceMode">电价模式</label>
                    <div style="display: flex; gap: 2rem;">
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="price-mode" value="combined" checked onchange="switchPriceMode('combined')">
                            <span class="i18n" data-i18n="price.combined">组合电价</span>
                        </label>
                        <label style="display: flex; align-items: center; gap: 0.5rem; cursor: pointer;">
                            <input type="radio" name="price-mode" value="simple" onchange="switchPriceMode('simple')">
                            <span class="i18n" data-i18n="price.simple">简单电价</span>
                        </label>
                    </div>
                </div>

                <!-- 组合电价模板 -->
                <div id="combined-price-templates">
                    <h3 class="form-label i18n" data-i18n="price.selectTemplate">选择电价模板</h3>
                    <div class="template-grid">
                        <div class="template-card" onclick="selectTemplate(this, 'residential')">
                            <h3 class="template-title i18n" data-i18n="price.residential">居民用电</h3>
                            <p class="template-description i18n" data-i18n="price.residentialDesc">适用于居民生活用电</p>
                        </div>
                        <div class="template-card" onclick="selectTemplate(this, 'commercial')">
                            <h3 class="template-title i18n" data-i18n="price.commercial">工商业用电</h3>
                            <p class="template-description i18n" data-i18n="price.commercialDesc">适用于工商业用电，支持容量电价</p>
                        </div>
                        <div class="template-card" onclick="selectTemplate(this, 'agricultural')">
                            <h3 class="template-title i18n" data-i18n="price.agricultural">农业用电</h3>
                            <p class="template-description i18n" data-i18n="price.agriculturalDesc">适用于农业生产用电</p>
                        </div>
                    </div>
                </div>

                <!-- 基本电价设置（工商业用电） -->
                <div id="basic-price-settings" style="display: none;">
                    <div class="validity-section">
                        <h3 class="form-label i18n" data-i18n="price.basicPrice">基本电价</h3>
                        <div class="form-group">
                            <label class="form-label i18n" data-i18n="price.billingMode">计费方式</label>
                            <select class="form-select" id="billing-mode">
                                <option value="capacity">按容量计费</option>
                                <option value="demand">按需量计费</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label i18n" data-i18n="price.basicPriceValue">基本电价值</label>
                            <div style="display: flex; gap: 1rem; align-items: center;">
                                <input type="number" class="form-input" id="basic-price" placeholder="请输入基本电价" step="0.01" style="max-width: 200px;">
                                <span class="form-label" id="basic-price-unit">元/kVA·月</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 操作按钮 -->
                <div class="action-bar">
                    <button class="btn btn-secondary" onclick="applyToOtherStations()">
                        <span class="i18n" data-i18n="price.applyToOthers">应用到其他电站</span>
                    </button>
                    <div style="display: flex; gap: 1rem;">
                        <button class="btn btn-secondary" onclick="cancelPriceSettings()">
                            <span class="i18n" data-i18n="btn.cancel">取消</span>
                        </button>
                        <button class="btn btn-primary" onclick="savePriceSettings()">
                            <span class="i18n" data-i18n="btn.save">保存</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        <!-- content结束 -->
    </main>

    <script>
        // 当前语言
        let currentLang = localStorage.getItem('ess_language') || 'zh';
        
        // 多语言配置
        const i18n = {
            zh: {
                // 页面标题
                'page.title': '电价设置',
                
                // 菜单
                'menu.station': '电站',
                'menu.stationManagement': '电站管理',
                'menu.priceSettings': '电价设置',
                'menu.analysis': '数据分析',
                'menu.alarm': '告警管理',
                'menu.device': '设备管理',
                'menu.user': '用户管理',
                'menu.report': '报表中心',
                'menu.setting': '系统设置',
                
                // 用户
                'user.admin': '管理员',
                
                // 电价设置
                'price.feedIn': '上网电价',
                'price.purchase': '购电电价',
                'price.selectStation': '选择电站',
                'price.priceType': '电价类型',
                'price.fixed': '固定电价',
                'price.fixedDesc': '所有时间段的电价一致',
                'price.volume': '按电量定价',
                'price.volumeDesc': '可分别设置不同时间段内阶梯电量的电价',
                'price.time': '分时电价',
                'price.timeDesc': '可设置多个时间段的电价，各时间段不可重叠',
                'price.timeWeekend': '分时电价（工作日+周末）',
                'price.timeWeekendDesc': '可分别设置工作日与周末不同时间段的电价',
                'price.validity': '有效期设置',
                'price.permanent': '永久生效',
                'price.startDate': '开始日期',
                'price.endDate': '结束日期',
                'price.fixedPriceValue': '固定电价值',
                'price.timePeriods': '时间段设置',
                'price.addPeriod': '添加时段',
                'price.applyToOthers': '应用到其他电站',
                'price.addNew': '新增电价',
                'price.priceMode': '电价模式',
                'price.combined': '组合电价',
                'price.simple': '简单电价',
                'price.selectTemplate': '选择电价模板',
                'price.residential': '居民用电',
                'price.residentialDesc': '适用于居民生活用电',
                'price.commercial': '工商业用电',
                'price.commercialDesc': '适用于工商业用电，支持容量电价',
                'price.agricultural': '农业用电',
                'price.agriculturalDesc': '适用于农业生产用电',
                'price.basicPrice': '基本电价',
                'price.billingMode': '计费方式',
                'price.basicPriceValue': '基本电价值',
                
                // 按钮
                'btn.cancel': '取消',
                'btn.save': '保存',
            },
            en: {
                // Page title
                'page.title': 'Price Settings',
                
                // Menu
                'menu.station': 'Station',
                'menu.stationManagement': 'Station Management',
                'menu.priceSettings': 'Price Settings',
                'menu.analysis': 'Data Analysis',
                'menu.alarm': 'Alarm Management',
                'menu.device': 'Device Management',
                'menu.user': 'User Management',
                'menu.report': 'Report Center',
                'menu.setting': 'System Settings',
                
                // User
                'user.admin': 'Admin',
                
                // Price settings
                'price.feedIn': 'Feed-in Tariff',
                'price.purchase': 'Purchase Tariff',
                'price.selectStation': 'Select Station',
                'price.priceType': 'Price Type',
                'price.fixed': 'Fixed Price',
                'price.fixedDesc': 'Same price for all time periods',
                'price.volume': 'Volume-based Pricing',
                'price.volumeDesc': 'Set tiered pricing for different time periods',
                'price.time': 'Time-of-Use Pricing',
                'price.timeDesc': 'Set prices for multiple time periods without overlap',
                'price.timeWeekend': 'TOU Pricing (Weekday+Weekend)',
                'price.timeWeekendDesc': 'Set different prices for weekdays and weekends',
                'price.validity': 'Validity Period',
                'price.permanent': 'Permanent',
                'price.startDate': 'Start Date',
                'price.endDate': 'End Date',
                'price.fixedPriceValue': 'Fixed Price Value',
                'price.timePeriods': 'Time Period Settings',
                'price.addPeriod': 'Add Period',
                'price.applyToOthers': 'Apply to Other Stations',
                'price.addNew': 'Add New Price',
                'price.priceMode': 'Price Mode',
                'price.combined': 'Combined Price',
                'price.simple': 'Simple Price',
                'price.selectTemplate': 'Select Price Template',
                'price.residential': 'Residential',
                'price.residentialDesc': 'For residential electricity use',
                'price.commercial': 'Commercial & Industrial',
                'price.commercialDesc': 'For commercial and industrial use, supports capacity pricing',
                'price.agricultural': 'Agricultural',
                'price.agriculturalDesc': 'For agricultural electricity use',
                'price.basicPrice': 'Basic Price',
                'price.billingMode': 'Billing Mode',
                'price.basicPriceValue': 'Basic Price Value',
                
                // Buttons
                'btn.cancel': 'Cancel',
                'btn.save': 'Save',
            }
        };
        
        // 获取翻译
        function t(key) {
            return i18n[currentLang][key] || key;
        }
        
        // 切换语言
        function toggleLanguage() {
            currentLang = currentLang === 'zh' ? 'en' : 'zh';
            localStorage.setItem('ess_language', currentLang);
            applyLanguage();
        }
        
        // 返回场景选择
        function goBack() {
            window.location.href = '../scenario-selection.html';
        }
        
        // 应用语言
        function applyLanguage() {
            document.getElementById('lang-text').textContent = currentLang === 'zh' ? '中文' : 'English';
            
            // 更新管理员文本
            const navButtons = document.querySelectorAll('.nav-button');
            navButtons.forEach(btn => {
                if (btn.textContent.includes('管理员') || btn.textContent.includes('Admin')) {
                    const span = btn.querySelector('span:last-child');
                    if (span) {
                        span.textContent = currentLang === 'zh' ? '管理员' : 'Admin';
                    }
                }
            });
            
            // 更新所有带有i18n类的元素
            document.querySelectorAll('.i18n').forEach(element => {
                const key = element.getAttribute('data-i18n');
                if (key && i18n[currentLang][key]) {
                    element.textContent = i18n[currentLang][key];
                }
            });
            
            // 更新页面标题
            document.title = t('page.title') + ' - ' + (currentLang === 'zh' ? '能源管理系统' : 'Energy Management System');
        }
        
        // 切换主题
        function toggleTheme() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            document.documentElement.setAttribute('data-theme', newTheme);
            document.getElementById('theme-icon').textContent = newTheme === 'dark' ? '☀️' : '🌙';
            localStorage.setItem('ess_theme', newTheme);
        }
        
        // 切换侧边栏
        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('open');
        }
        
        // 切换子菜单
        function toggleSubmenu(menuParent) {
            const submenu = menuParent.nextElementSibling;
            const isOpen = submenu.classList.contains('open');
            
            // 关闭所有其他子菜单
            document.querySelectorAll('.submenu.open').forEach(menu => {
                if (menu !== submenu) {
                    menu.classList.remove('open');
                    menu.previousElementSibling.classList.remove('expanded');
                }
            });
            
            // 切换当前子菜单
            if (isOpen) {
                submenu.classList.remove('open');
                menuParent.classList.remove('expanded');
            } else {
                submenu.classList.add('open');
                menuParent.classList.add('expanded');
            }
        }
        
        // 切换Tab
        function switchTab(tab) {
            // 更新Tab按钮状态
            document.querySelectorAll('.tab-button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.closest('.tab-button').classList.add('active');
            
            // 显示对应内容
            if (tab === 'feed-in') {
                document.getElementById('feed-in-content').style.display = 'block';
                document.getElementById('purchase-content').style.display = 'none';
            } else {
                document.getElementById('feed-in-content').style.display = 'none';
                document.getElementById('purchase-content').style.display = 'block';
            }
        }
        
        // 选择电价类型
        function selectPriceType(card, type) {
            // 更新卡片选中状态
            document.querySelectorAll('.template-card').forEach(c => {
                c.classList.remove('selected');
            });
            card.classList.add('selected');
            
            // 显示对应的设置区域
            document.getElementById('fixed-price-settings').style.display = type === 'fixed' ? 'block' : 'none';
            document.getElementById('time-price-settings').style.display = type === 'time' || type === 'timeWeekend' ? 'block' : 'none';
        }
        
        // 切换开关
        function toggleSwitch(switchElement) {
            switchElement.classList.toggle('active');
            const isActive = switchElement.classList.contains('active');
            document.getElementById('validity-dates').style.display = isActive ? 'none' : 'block';
        }
        
        // 添加时间段
        function addTimePeriod() {
            const timeSlotsContainer = document.getElementById('time-slots');
            const newSlot = document.createElement('div');
            newSlot.className = 'time-slot';
            newSlot.innerHTML = `
                <input type="time" class="time-input" value="08:00">
                <input type="time" class="time-input" value="12:00">
                <input type="number" class="price-input" placeholder="电价" step="0.01">
                <button class="btn btn-icon btn-danger" onclick="removeTimeSlot(this)">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            `;
            timeSlotsContainer.appendChild(newSlot);
        }
        
        // 删除时间段
        function removeTimeSlot(button) {
            button.closest('.time-slot').remove();
        }
        
        // 切换电价模式
        function switchPriceMode(mode) {
            document.getElementById('combined-price-templates').style.display = mode === 'combined' ? 'block' : 'none';
        }
        
        // 选择模板
        function selectTemplate(card, template) {
            // 更新卡片选中状态
            card.parentElement.querySelectorAll('.template-card').forEach(c => {
                c.classList.remove('selected');
            });
            card.classList.add('selected');
            
            // 显示基本电价设置（仅工商业）
            document.getElementById('basic-price-settings').style.display = template === 'commercial' ? 'block' : 'none';
        }
        
        // 保存电价设置
        function savePriceSettings() {
            // 这里添加保存逻辑
            alert(currentLang === 'zh' ? '电价设置已保存' : 'Price settings saved');
        }
        
        // 取消设置
        function cancelPriceSettings() {
            if (confirm(currentLang === 'zh' ? '确定要取消当前设置吗？' : 'Are you sure you want to cancel?')) {
                // 重置表单
                location.reload();
            }
        }
        
        // 应用到其他电站
        function applyToOtherStations() {
            // 这里可以打开一个模态框选择其他电站
            alert(currentLang === 'zh' ? '选择要应用的电站' : 'Select stations to apply');
        }
        
        // 新增电价
        function addNewPrice() {
            // 这里可以打开新增电价的模态框
            alert(currentLang === 'zh' ? '新增电价配置' : 'Add new price configuration');
        }
        
        // 初始化
        document.addEventListener('DOMContentLoaded', function() {
            // 应用保存的主题
            const savedTheme = localStorage.getItem('ess_theme') || 'light';
            document.documentElement.setAttribute('data-theme', savedTheme);
            document.getElementById('theme-icon').textContent = savedTheme === 'dark' ? '☀️' : '🌙';
            
            // 应用语言
            applyLanguage();
        });
    </script>
</body>
</html>