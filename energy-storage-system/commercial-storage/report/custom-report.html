<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ëá™ÂÆö‰πâÊä•Ë°® - Â∑•ÂïÜÂÇ®ËÉΩÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link rel="stylesheet" href="../sidebar.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #EBEDF4;
            color: #333;
        }

        .main-content {
            margin-left: 250px;
            padding: 20px;
            min-height: 100vh;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ddd;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }

        .tab-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
        }

        .nav-tabs .nav-link {
            color: #666;
            border: none;
            border-bottom: 3px solid transparent;
            padding: 15px 20px;
            font-weight: 500;
        }

        .nav-tabs .nav-link.active {
            color: #007bff;
            background-color: transparent;
            border-color: #007bff;
        }

        .tab-content {
            padding: 20px;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .template-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .template-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .template-card.selected {
            border-color: #007bff;
            background-color: #f0f8ff;
        }

        .template-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .template-name {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .template-desc {
            font-size: 14px;
            color: #666;
        }

        .form-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .form-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .form-group label {
            font-weight: 500;
            color: #495057;
            margin-bottom: 8px;
        }

        .form-control {
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 8px 12px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .custom-checkbox {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .custom-checkbox:hover {
            background-color: #f8f9fa;
        }

        .custom-checkbox input[type="checkbox"] {
            margin-right: 8px;
        }

        .btn-section {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-custom {
            padding: 10px 24px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary-custom {
            background: #007bff;
            color: white;
        }

        .btn-primary-custom:hover {
            background: #0056b3;
        }

        .btn-secondary-custom {
            background: white;
            color: #333;
            border: 1px solid #D6D8DE;
        }

        .btn-secondary-custom:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }

        .preview-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .preview-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .preview-content {
            min-height: 400px;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }

        .saved-reports {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .report-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }

        .report-card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .report-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .report-type {
            font-size: 12px;
            padding: 4px 8px;
            background: #e9ecef;
            border-radius: 4px;
            color: #666;
        }

        .report-info {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .report-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }

        .btn-report {
            flex: 1;
            padding: 6px 12px;
            font-size: 12px;
            text-align: center;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            background: white;
            color: #495057;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-report:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }

        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
                padding: 10px;
            }

            .template-grid {
                grid-template-columns: 1fr;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="sidebar-container"></div>
    
    <div class="main-content">
        <div class="page-header">
            <h1 class="page-title">Ëá™ÂÆö‰πâÊä•Ë°®</h1>
        </div>

        <div class="tab-section">
            <ul class="nav nav-tabs" id="customReportTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="create-tab" data-toggle="tab" href="#create" role="tab">ÂàõÂª∫Êä•Ë°®</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="templates-tab" data-toggle="tab" href="#templates" role="tab">Êä•Ë°®Ê®°Êùø</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="saved-tab" data-toggle="tab" href="#saved" role="tab">Â∑≤‰øùÂ≠òÊä•Ë°®</a>
                </li>
            </ul>

            <div class="tab-content" id="customReportContent">
                <!-- ÂàõÂª∫Êä•Ë°®Ê†áÁ≠æ -->
                <div class="tab-pane fade show active" id="create" role="tabpanel">
                    <div class="template-grid">
                        <div class="template-card" onclick="selectTemplate('station')">
                            <div class="template-icon">üè≠</div>
                            <div class="template-name">ÁîµÁ´ôËøêËê•Êä•Ë°®</div>
                            <div class="template-desc">ÂåÖÂê´ÁîµÁ´ôÂü∫Á°ÄÊï∞ÊçÆ„ÄÅËøêË°åÁä∂ÊÄÅ„ÄÅÊïàÁéáÂàÜÊûê</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('revenue')">
                            <div class="template-icon">üí∞</div>
                            <div class="template-name">Êî∂ÁõäÂàÜÊûêÊä•Ë°®</div>
                            <div class="template-desc">Â≥∞Ë∞∑Â•óÂà©„ÄÅÈúÄÈáèÁÆ°ÁêÜ„ÄÅË∞ÉÈ¢ëÊî∂ÁõäÁ≠â</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('device')">
                            <div class="template-icon">‚öôÔ∏è</div>
                            <div class="template-name">ËÆæÂ§áÁä∂ÊÄÅÊä•Ë°®</div>
                            <div class="template-desc">ËÆæÂ§áËøêË°åÊÉÖÂÜµ„ÄÅÊïÖÈöúÁªüËÆ°„ÄÅÁª¥Êä§ËÆ∞ÂΩï</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('energy')">
                            <div class="template-icon">‚ö°</div>
                            <div class="template-name">ËÉΩÊïàÂàÜÊûêÊä•Ë°®</div>
                            <div class="template-desc">ÂÖÖÊîæÁîµÊïàÁéá„ÄÅËÉΩÈáèÊçüËÄó„ÄÅ‰ºòÂåñÂª∫ËÆÆ</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('alarm')">
                            <div class="template-icon">üîî</div>
                            <div class="template-name">ÂëäË≠¶ÁªüËÆ°Êä•Ë°®</div>
                            <div class="template-desc">ÂëäË≠¶Ë∂ãÂäø„ÄÅÁ±ªÂûãÂàÜÂ∏É„ÄÅÂ§ÑÁêÜÊÉÖÂÜµ</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('custom')">
                            <div class="template-icon">üìä</div>
                            <div class="template-name">ÂÆåÂÖ®Ëá™ÂÆö‰πâ</div>
                            <div class="template-desc">Ëá™Áî±ÈÄâÊã©Êï∞ÊçÆÊåáÊ†áÂíåÂõæË°®Á±ªÂûã</div>
                        </div>
                    </div>

                    <div class="form-section" id="reportForm" style="display: none;">
                        <h3 class="form-title">Êä•Ë°®ÈÖçÁΩÆ</h3>
                        <form>
                            <div class="form-group">
                                <label>Êä•Ë°®ÂêçÁß∞</label>
                                <input type="text" class="form-control" id="reportName" placeholder="ËØ∑ËæìÂÖ•Êä•Ë°®ÂêçÁß∞">
                            </div>

                            <div class="form-group">
                                <label>Êä•Ë°®ÊèèËø∞</label>
                                <textarea class="form-control" id="reportDesc" rows="3" placeholder="ËØ∑ËæìÂÖ•Êä•Ë°®ÊèèËø∞"></textarea>
                            </div>

                            <div class="form-group">
                                <label>Êï∞ÊçÆËåÉÂõ¥</label>
                                <select class="form-control" id="dataRange">
                                    <option value="day">Êó•Êä•Ë°®</option>
                                    <option value="week">Âë®Êä•Ë°®</option>
                                    <option value="month">ÊúàÊä•Ë°®</option>
                                    <option value="year">Âπ¥Êä•Ë°®</option>
                                    <option value="custom">Ëá™ÂÆö‰πâÊó∂Èó¥ËåÉÂõ¥</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>ÈÄâÊã©ÁîµÁ´ô</label>
                                <div class="checkbox-group">
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="stations" value="1" checked>
                                        ÊúùÈò≥Ë∑ØÂ∑•‰∏öÂõ≠ÂÇ®ËÉΩÁ´ô
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="stations" value="2">
                                        ÂüéË•øÈÖçÁîµÁ´ô
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="stations" value="3">
                                        ÁªèÂºÄÂå∫ÂÇ®ËÉΩÁ´ô
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>Êï∞ÊçÆÊåáÊ†á</label>
                                <div class="checkbox-group" id="dataMetrics">
                                    <!-- Âä®ÊÄÅÂä†ËΩΩÊï∞ÊçÆÊåáÊ†á -->
                                </div>
                            </div>

                            <div class="form-group">
                                <label>ÂõæË°®Á±ªÂûã</label>
                                <div class="checkbox-group">
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="line" checked>
                                        ÊäòÁ∫øÂõæ
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="bar">
                                        Êü±Áä∂Âõæ
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="pie">
                                        È•ºÂõæ
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="table">
                                        Êï∞ÊçÆË°®Ê†º
                                    </label>
                                </div>
                            </div>

                            <div class="btn-section">
                                <button type="button" class="btn-custom btn-secondary-custom" onclick="previewReport()">È¢ÑËßà</button>
                                <button type="button" class="btn-custom btn-secondary-custom" onclick="saveAsTemplate()">‰øùÂ≠ò‰∏∫Ê®°Êùø</button>
                                <button type="button" class="btn-custom btn-primary-custom" onclick="generateReport()">ÁîüÊàêÊä•Ë°®</button>
                            </div>
                        </form>
                    </div>

                    <div class="preview-section" id="previewSection" style="display: none;">
                        <div class="preview-header">
                            <h3 class="preview-title">Êä•Ë°®È¢ÑËßà</h3>
                            <button class="btn-custom btn-secondary-custom" onclick="closePreview()">ÂÖ≥Èó≠È¢ÑËßà</button>
                        </div>
                        <div class="preview-content">
                            <span>ËØ∑ÂÖàÈÖçÁΩÆÊä•Ë°®ÂèÇÊï∞</span>
                        </div>
                    </div>
                </div>

                <!-- Êä•Ë°®Ê®°ÊùøÊ†áÁ≠æ -->
                <div class="tab-pane fade" id="templates" role="tabpanel">
                    <div class="saved-reports">
                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">ÊúàÂ∫¶ËøêËê•Êä•Ë°®Ê®°Êùø</h4>
                                <span class="report-type">Á≥ªÁªüÊ®°Êùø</span>
                            </div>
                            <div class="report-info">ÂåÖÂê´ÔºöÂèëÁîµÈáè„ÄÅÊî∂Áõä„ÄÅÊïàÁéá„ÄÅÂëäË≠¶ÁªüËÆ°</div>
                            <div class="report-info">Êï∞ÊçÆËåÉÂõ¥ÔºöÊúàÊä•</div>
                            <div class="report-info">ÂàõÂª∫Êó∂Èó¥Ôºö2024-01-01</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="useTemplate('monthly-operation')">‰ΩøÁî®Ê®°Êùø</button>
                                <button class="btn-report" onclick="viewTemplate('monthly-operation')">Êü•ÁúãËØ¶ÊÉÖ</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">ËÆæÂ§áÂÅ•Â∫∑Â∫¶Êä•Ë°®</h4>
                                <span class="report-type">Áî®Êà∑Ê®°Êùø</span>
                            </div>
                            <div class="report-info">ÂåÖÂê´ÔºöËÆæÂ§áÁä∂ÊÄÅ„ÄÅÊïÖÈöúÁéá„ÄÅÁª¥Êä§ËÆ∞ÂΩï</div>
                            <div class="report-info">Êï∞ÊçÆËåÉÂõ¥ÔºöÂë®Êä•</div>
                            <div class="report-info">ÂàõÂª∫Êó∂Èó¥Ôºö2024-01-15</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="useTemplate('device-health')">‰ΩøÁî®Ê®°Êùø</button>
                                <button class="btn-report" onclick="editTemplate('device-health')">ÁºñËæë</button>
                                <button class="btn-report" onclick="deleteTemplate('device-health')">Âà†Èô§</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">Â≥∞Ë∞∑Â•óÂà©ÂàÜÊûê</h4>
                                <span class="report-type">Áî®Êà∑Ê®°Êùø</span>
                            </div>
                            <div class="report-info">ÂåÖÂê´ÔºöÂÖÖÊîæÁîµÊó∂ÊÆµ„ÄÅÁîµ‰ª∑Â∑Æ„ÄÅÊî∂ÁõäËÆ°ÁÆó</div>
                            <div class="report-info">Êï∞ÊçÆËåÉÂõ¥ÔºöÊó•Êä•</div>
                            <div class="report-info">ÂàõÂª∫Êó∂Èó¥Ôºö2024-01-20</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="useTemplate('peak-valley')">‰ΩøÁî®Ê®°Êùø</button>
                                <button class="btn-report" onclick="editTemplate('peak-valley')">ÁºñËæë</button>
                                <button class="btn-report" onclick="deleteTemplate('peak-valley')">Âà†Èô§</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Â∑≤‰øùÂ≠òÊä•Ë°®Ê†áÁ≠æ -->
                <div class="tab-pane fade" id="saved" role="tabpanel">
                    <div class="saved-reports">
                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">2024Âπ¥1ÊúàËøêËê•Êä•Ë°®</h4>
                                <span class="report-type">ÊúàÊä•</span>
                            </div>
                            <div class="report-info">ÁîµÁ´ôÔºöÊúùÈò≥Ë∑ØÂ∑•‰∏öÂõ≠ÂÇ®ËÉΩÁ´ô</div>
                            <div class="report-info">ÁîüÊàêÊó∂Èó¥Ôºö2024-01-24 10:30</div>
                            <div class="report-info">Êñá‰ª∂Â§ßÂ∞èÔºö2.3 MB</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="viewReport('202401-operation')">Êü•Áúã</button>
                                <button class="btn-report" onclick="downloadReport('202401-operation')">‰∏ãËΩΩ</button>
                                <button class="btn-report" onclick="shareReport('202401-operation')">ÂàÜ‰∫´</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">ËÆæÂ§áÊïÖÈöúÂàÜÊûêÊä•Âëä</h4>
                                <span class="report-type">Ëá™ÂÆö‰πâ</span>
                            </div>
                            <div class="report-info">ÁîµÁ´ôÔºöÂÖ®ÈÉ®ÁîµÁ´ô</div>
                            <div class="report-info">ÁîüÊàêÊó∂Èó¥Ôºö2024-01-23 14:20</div>
                            <div class="report-info">Êñá‰ª∂Â§ßÂ∞èÔºö1.8 MB</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="viewReport('device-fault')">Êü•Áúã</button>
                                <button class="btn-report" onclick="downloadReport('device-fault')">‰∏ãËΩΩ</button>
                                <button class="btn-report" onclick="deleteReport('device-fault')">Âà†Èô§</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">Á¨¨3Âë®Êî∂ÁõäÊä•Ë°®</h4>
                                <span class="report-type">Âë®Êä•</span>
                            </div>
                            <div class="report-info">ÁîµÁ´ôÔºöÂüéË•øÈÖçÁîµÁ´ô</div>
                            <div class="report-info">ÁîüÊàêÊó∂Èó¥Ôºö2024-01-21 09:00</div>
                            <div class="report-info">Êñá‰ª∂Â§ßÂ∞èÔºö1.2 MB</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="viewReport('week3-revenue')">Êü•Áúã</button>
                                <button class="btn-report" onclick="downloadReport('week3-revenue')">‰∏ãËΩΩ</button>
                                <button class="btn-report" onclick="scheduleReport('week3-revenue')">ÂÆöÊó∂ÂèëÈÄÅ</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../sidebar.js"></script>
    <script>
        let selectedTemplate = null;

        function selectTemplate(type) {
            selectedTemplate = type;
            
            // È´ò‰∫ÆÈÄâ‰∏≠ÁöÑÊ®°Êùø
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // ÊòæÁ§∫Ë°®Âçï
            document.getElementById('reportForm').style.display = 'block';
            
            // Ê†πÊçÆÊ®°ÊùøÁ±ªÂûãÂä†ËΩΩ‰∏çÂêåÁöÑÊï∞ÊçÆÊåáÊ†á
            loadDataMetrics(type);
        }

        function loadDataMetrics(type) {
            const metricsContainer = document.getElementById('dataMetrics');
            let metrics = [];
            
            switch(type) {
                case 'station':
                    metrics = ['ÂèëÁîµÈáè', 'ÂÖÖÁîµÈáè', 'ÊîæÁîµÈáè', 'ËøêË°åÊó∂Èïø', 'ËÆæÂ§áÂà©Áî®Áéá', 'Á≥ªÁªüÊïàÁéá'];
                    break;
                case 'revenue':
                    metrics = ['Â≥∞Ë∞∑Â•óÂà©', 'ÈúÄÈáèÁÆ°ÁêÜ', 'Ë∞ÉÈ¢ëÊúçÂä°', 'ÂÆπÈáèÁîµË¥π', 'ÊÄªÊî∂Áõä', 'ÊäïËµÑÂõûÊä•Áéá'];
                    break;
                case 'device':
                    metrics = ['ËÆæÂ§áÁä∂ÊÄÅ', 'ÊïÖÈöúÊ¨°Êï∞', 'Áª¥Êä§ËÆ∞ÂΩï', 'ÂÅ•Â∫∑Â∫¶', 'ÂèØÁî®Áéá', 'Âπ≥ÂùáÊïÖÈöúÈó¥Èöî'];
                    break;
                case 'energy':
                    metrics = ['ÂÖÖÁîµÊïàÁéá', 'ÊîæÁîµÊïàÁéá', 'ÂæÄËøîÊïàÁéá', 'ËÉΩÈáèÊçüËÄó', 'SOCÂàÜÂ∏É', 'ÂäüÁéáÂõ†Êï∞'];
                    break;
                case 'alarm':
                    metrics = ['ÂëäË≠¶ÊÄªÊï∞', '‰∏•ÈáçÂëäË≠¶', '‰∏ÄËà¨ÂëäË≠¶', 'ÂëäË≠¶Ë∂ãÂäø', 'Â§ÑÁêÜÊó∂Èïø', 'ÂëäË≠¶Á±ªÂûãÂàÜÂ∏É'];
                    break;
                case 'custom':
                    metrics = ['ÂèëÁîµÈáè', 'ÂÖÖÁîµÈáè', 'ÊîæÁîµÈáè', 'Êî∂Áõä', 'ÊïàÁéá', 'ÂëäË≠¶', 'ËÆæÂ§áÁä∂ÊÄÅ', 'SOC', 'ÂäüÁéá', 'Ê∏©Â∫¶'];
                    break;
            }
            
            metricsContainer.innerHTML = metrics.map(metric => `
                <label class="custom-checkbox">
                    <input type="checkbox" name="metrics" value="${metric}" checked>
                    ${metric}
                </label>
            `).join('');
        }

        function previewReport() {
            const previewSection = document.getElementById('previewSection');
            previewSection.style.display = 'block';
            
            // Ê®°ÊãüÈ¢ÑËßàÂÜÖÂÆπ
            const previewContent = document.querySelector('.preview-content');
            previewContent.innerHTML = `
                <div style="padding: 40px; text-align: left;">
                    <h4 style="color: #2c3e50; margin-bottom: 20px;">Êä•Ë°®È¢ÑËßàÁîüÊàê‰∏≠...</h4>
                    <p style="color: #666;">Ê≠£Âú®Ê†πÊçÆÊÇ®ÁöÑÈÖçÁΩÆÁîüÊàêÊä•Ë°®È¢ÑËßà</p>
                    <div class="spinner-border text-primary" role="status" style="margin-top: 20px;">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            `;
            
            // Ê®°ÊãüÂä†ËΩΩÊïàÊûú
            setTimeout(() => {
                previewContent.innerHTML = `
                    <div style="padding: 20px; text-align: left; width: 100%;">
                        <h4 style="color: #2c3e50;">È¢ÑËßàÂÜÖÂÆπÂ∑≤ÁîüÊàê</h4>
                        <p style="color: #666;">ËøôÈáåÂ∞ÜÊòæÁ§∫Ê†πÊçÆÊÇ®ÈÄâÊã©ÁöÑÊ®°ÊùøÂíåÈÖçÁΩÆÁîüÊàêÁöÑÊä•Ë°®È¢ÑËßà</p>
                    </div>
                `;
            }, 2000);
        }

        function closePreview() {
            document.getElementById('previewSection').style.display = 'none';
        }

        function saveAsTemplate() {
            const reportName = document.getElementById('reportName').value;
            if (!reportName) {
                showMessage('ËØ∑ËæìÂÖ•Êä•Ë°®ÂêçÁß∞', 'error');
                return;
            }
            
            showMessage('Ê≠£Âú®‰øùÂ≠ò‰∏∫Ê®°Êùø...', 'info');
            setTimeout(() => {
                showMessage('Ê®°Êùø‰øùÂ≠òÊàêÂäü', 'success');
            }, 1500);
        }

        function generateReport() {
            const reportName = document.getElementById('reportName').value;
            if (!reportName) {
                showMessage('ËØ∑ËæìÂÖ•Êä•Ë°®ÂêçÁß∞', 'error');
                return;
            }
            
            showMessage('Ê≠£Âú®ÁîüÊàêÊä•Ë°®...', 'info');
            setTimeout(() => {
                showMessage('Êä•Ë°®ÁîüÊàêÊàêÂäü', 'success');
                // ÂàáÊç¢Âà∞Â∑≤‰øùÂ≠òÊä•Ë°®Ê†áÁ≠æ
                $('#saved-tab').tab('show');
            }, 2000);
        }

        function useTemplate(templateId) {
            // ÂàáÊç¢Âà∞ÂàõÂª∫Êä•Ë°®Ê†áÁ≠æ
            $('#create-tab').tab('show');
            showMessage('Â∑≤Âä†ËΩΩÊ®°ÊùøÈÖçÁΩÆ', 'success');
        }

        function viewTemplate(templateId) {
            showMessage('Êü•ÁúãÊ®°ÊùøËØ¶ÊÉÖÔºö' + templateId, 'info');
        }

        function editTemplate(templateId) {
            showMessage('ÁºñËæëÊ®°ÊùøÔºö' + templateId, 'info');
        }

        function deleteTemplate(templateId) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§Ê®°ÊùøÂêóÔºü')) {
                showMessage('Ê®°ÊùøÂ∑≤Âà†Èô§', 'success');
            }
        }

        function viewReport(reportId) {
            showMessage('Êü•ÁúãÊä•Ë°®Ôºö' + reportId, 'info');
        }

        function downloadReport(reportId) {
            showMessage('Ê≠£Âú®‰∏ãËΩΩÊä•Ë°®...', 'info');
            setTimeout(() => {
                showMessage('Êä•Ë°®‰∏ãËΩΩÊàêÂäü', 'success');
            }, 1500);
        }

        function shareReport(reportId) {
            showMessage('ÂàÜ‰∫´ÈìæÊé•Â∑≤ÁîüÊàê', 'success');
        }

        function deleteReport(reportId) {
            if (confirm('Á°ÆÂÆöË¶ÅÂà†Èô§Ê≠§Êä•Ë°®ÂêóÔºü')) {
                showMessage('Êä•Ë°®Â∑≤Âà†Èô§', 'success');
            }
        }

        function scheduleReport(reportId) {
            showMessage('ËÆæÁΩÆÂÆöÊó∂ÂèëÈÄÅ', 'info');
        }

        function showMessage(message, type) {
            const alertClass = type === 'success' ? 'alert-success' : 
                              type === 'error' ? 'alert-danger' : 'alert-info';
            
            const alertHtml = `
                <div class="alert ${alertClass} alert-dismissible fade show" role="alert" style="position: fixed; top: 20px; right: 20px; z-index: 9999;">
                    ${message}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            `;
            
            const alertElement = $(alertHtml);
            $('body').append(alertElement);
            
            setTimeout(() => {
                alertElement.alert('close');
            }, 3000);
        }
    </script>
</body>
</html>