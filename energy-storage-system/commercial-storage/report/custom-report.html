<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è‡ªå®šä¹‰æŠ¥è¡¨ - å·¥å•†å‚¨èƒ½ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../sidebar.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #EBEDF4;
            color: #333;
        }

        .main-content {
            margin-left: 250px;
            padding: 20px;
            min-height: 100vh;
        }

        .page-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ddd;
        }

        .page-title {
            font-size: 24px;
            font-weight: 600;
            color: #2c3e50;
        }

        .tab-section {
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .nav-tabs {
            border-bottom: 2px solid #dee2e6;
        }

        .nav-tabs .nav-link {
            color: #666;
            border: none;
            border-bottom: 3px solid transparent;
            padding: 15px 20px;
            font-weight: 500;
        }

        .nav-tabs .nav-link.active {
            color: #007bff;
            background-color: transparent;
            border-color: #007bff;
        }

        .tab-content {
            padding: 20px;
        }

        .template-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .template-card {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            text-align: center;
        }

        .template-card:hover {
            border-color: #007bff;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .template-card.selected {
            border-color: #007bff;
            background-color: #f0f8ff;
        }

        .template-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .template-name {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .template-desc {
            font-size: 14px;
            color: #666;
        }

        .form-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .form-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .form-group label {
            font-weight: 500;
            color: #495057;
            margin-bottom: 8px;
        }

        .form-control {
            border: 1px solid #ced4da;
            border-radius: 4px;
            padding: 8px 12px;
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 10px;
        }

        .custom-checkbox {
            display: flex;
            align-items: center;
            padding: 8px 12px;
            border: 1px solid #e9ecef;
            border-radius: 4px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .custom-checkbox:hover {
            background-color: #f8f9fa;
        }

        .custom-checkbox input[type="checkbox"] {
            margin-right: 8px;
        }

        .btn-section {
            display: flex;
            justify-content: flex-end;
            gap: 10px;
            margin-top: 20px;
        }

        .btn-custom {
            padding: 10px 24px;
            border: none;
            border-radius: 4px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s;
        }

        .btn-primary-custom {
            background: #007bff;
            color: white;
        }

        .btn-primary-custom:hover {
            background: #0056b3;
        }

        .btn-secondary-custom {
            background: white;
            color: #333;
            border: 1px solid #D6D8DE;
        }

        .btn-secondary-custom:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }

        .preview-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 1px solid #e9ecef;
        }

        .preview-title {
            font-size: 18px;
            font-weight: 600;
            color: #2c3e50;
        }

        .preview-content {
            min-height: 400px;
            border: 2px dashed #dee2e6;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #6c757d;
        }

        .saved-reports {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .report-card {
            background: white;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            transition: all 0.3s;
        }

        .report-card:hover {
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }

        .report-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 15px;
        }

        .report-title {
            font-size: 16px;
            font-weight: 600;
            color: #2c3e50;
        }

        .report-type {
            font-size: 12px;
            padding: 4px 8px;
            background: #e9ecef;
            border-radius: 4px;
            color: #666;
        }

        .report-info {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .report-actions {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }

        .btn-report {
            flex: 1;
            padding: 6px 12px;
            font-size: 12px;
            text-align: center;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            background: white;
            color: #495057;
            cursor: pointer;
            transition: all 0.2s;
        }

        .btn-report:hover {
            background: #f8f9fa;
            border-color: #adb5bd;
        }

        @media (max-width: 768px) {
            .main-content {
                margin-left: 0;
                padding: 10px;
            }

            .template-grid {
                grid-template-columns: 1fr;
            }

            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="sidebar-container"></div>
    
    <div class="main-content">
        <div class="page-header">
            <h1 class="page-title">è‡ªå®šä¹‰æŠ¥è¡¨</h1>
        </div>

        <div class="tab-section">
            <ul class="nav nav-tabs" id="customReportTabs" role="tablist">
                <li class="nav-item">
                    <a class="nav-link active" id="create-tab" data-toggle="tab" href="#create" role="tab">åˆ›å»ºæŠ¥è¡¨</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="templates-tab" data-toggle="tab" href="#templates" role="tab">æŠ¥è¡¨æ¨¡æ¿</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" id="saved-tab" data-toggle="tab" href="#saved" role="tab">å·²ä¿å­˜æŠ¥è¡¨</a>
                </li>
            </ul>

            <div class="tab-content" id="customReportContent">
                <!-- åˆ›å»ºæŠ¥è¡¨æ ‡ç­¾ -->
                <div class="tab-pane fade show active" id="create" role="tabpanel">
                    <div class="template-grid">
                        <div class="template-card" onclick="selectTemplate('station')">
                            <div class="template-icon">ğŸ­</div>
                            <div class="template-name">ç”µç«™è¿è¥æŠ¥è¡¨</div>
                            <div class="template-desc">åŒ…å«ç”µç«™åŸºç¡€æ•°æ®ã€è¿è¡ŒçŠ¶æ€ã€æ•ˆç‡åˆ†æ</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('revenue')">
                            <div class="template-icon">ğŸ’°</div>
                            <div class="template-name">æ”¶ç›Šåˆ†ææŠ¥è¡¨</div>
                            <div class="template-desc">å³°è°·å¥—åˆ©ã€éœ€é‡ç®¡ç†ã€è°ƒé¢‘æ”¶ç›Šç­‰</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('device')">
                            <div class="template-icon">âš™ï¸</div>
                            <div class="template-name">è®¾å¤‡çŠ¶æ€æŠ¥è¡¨</div>
                            <div class="template-desc">è®¾å¤‡è¿è¡Œæƒ…å†µã€æ•…éšœç»Ÿè®¡ã€ç»´æŠ¤è®°å½•</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('energy')">
                            <div class="template-icon">âš¡</div>
                            <div class="template-name">èƒ½æ•ˆåˆ†ææŠ¥è¡¨</div>
                            <div class="template-desc">å……æ”¾ç”µæ•ˆç‡ã€èƒ½é‡æŸè€—ã€ä¼˜åŒ–å»ºè®®</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('alarm')">
                            <div class="template-icon">ğŸ””</div>
                            <div class="template-name">å‘Šè­¦ç»Ÿè®¡æŠ¥è¡¨</div>
                            <div class="template-desc">å‘Šè­¦è¶‹åŠ¿ã€ç±»å‹åˆ†å¸ƒã€å¤„ç†æƒ…å†µ</div>
                        </div>
                        <div class="template-card" onclick="selectTemplate('custom')">
                            <div class="template-icon">ğŸ“Š</div>
                            <div class="template-name">å®Œå…¨è‡ªå®šä¹‰</div>
                            <div class="template-desc">è‡ªç”±é€‰æ‹©æ•°æ®æŒ‡æ ‡å’Œå›¾è¡¨ç±»å‹</div>
                        </div>
                    </div>

                    <div class="form-section" id="reportForm" style="display: none;">
                        <h3 class="form-title">æŠ¥è¡¨é…ç½®</h3>
                        <form>
                            <div class="form-group">
                                <label>æŠ¥è¡¨åç§°</label>
                                <input type="text" class="form-control" id="reportName" placeholder="è¯·è¾“å…¥æŠ¥è¡¨åç§°">
                            </div>

                            <div class="form-group">
                                <label>æŠ¥è¡¨æè¿°</label>
                                <textarea class="form-control" id="reportDesc" rows="3" placeholder="è¯·è¾“å…¥æŠ¥è¡¨æè¿°"></textarea>
                            </div>

                            <div class="form-group">
                                <label>æ•°æ®èŒƒå›´</label>
                                <select class="form-control" id="dataRange">
                                    <option value="day">æ—¥æŠ¥è¡¨</option>
                                    <option value="week">å‘¨æŠ¥è¡¨</option>
                                    <option value="month">æœˆæŠ¥è¡¨</option>
                                    <option value="year">å¹´æŠ¥è¡¨</option>
                                    <option value="custom">è‡ªå®šä¹‰æ—¶é—´èŒƒå›´</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label>é€‰æ‹©ç”µç«™</label>
                                <div class="checkbox-group">
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="stations" value="1" checked>
                                        æœé˜³è·¯å·¥ä¸šå›­å‚¨èƒ½ç«™
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="stations" value="2">
                                        åŸè¥¿é…ç”µç«™
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="stations" value="3">
                                        ç»å¼€åŒºå‚¨èƒ½ç«™
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label>æ•°æ®æŒ‡æ ‡</label>
                                <div class="checkbox-group" id="dataMetrics">
                                    <!-- åŠ¨æ€åŠ è½½æ•°æ®æŒ‡æ ‡ -->
                                </div>
                            </div>

                            <div class="form-group">
                                <label>å›¾è¡¨ç±»å‹</label>
                                <div class="checkbox-group">
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="line" checked>
                                        æŠ˜çº¿å›¾
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="bar">
                                        æŸ±çŠ¶å›¾
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="pie">
                                        é¥¼å›¾
                                    </label>
                                    <label class="custom-checkbox">
                                        <input type="checkbox" name="charts" value="table">
                                        æ•°æ®è¡¨æ ¼
                                    </label>
                                </div>
                            </div>

                            <div class="btn-section">
                                <button type="button" class="btn-custom btn-secondary-custom" onclick="previewReport()">é¢„è§ˆ</button>
                                <button type="button" class="btn-custom btn-secondary-custom" onclick="saveAsTemplate()">ä¿å­˜ä¸ºæ¨¡æ¿</button>
                                <button type="button" class="btn-custom btn-primary-custom" onclick="generateReport()">ç”ŸæˆæŠ¥è¡¨</button>
                            </div>
                        </form>
                    </div>

                    <div class="preview-section" id="previewSection" style="display: none;">
                        <div class="preview-header">
                            <h3 class="preview-title">æŠ¥è¡¨é¢„è§ˆ</h3>
                            <button class="btn-custom btn-secondary-custom" onclick="closePreview()">å…³é—­é¢„è§ˆ</button>
                        </div>
                        <div class="preview-content">
                            <span>è¯·å…ˆé…ç½®æŠ¥è¡¨å‚æ•°</span>
                        </div>
                    </div>
                </div>

                <!-- æŠ¥è¡¨æ¨¡æ¿æ ‡ç­¾ -->
                <div class="tab-pane fade" id="templates" role="tabpanel">
                    <div class="saved-reports">
                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">æœˆåº¦è¿è¥æŠ¥è¡¨æ¨¡æ¿</h4>
                                <span class="report-type">ç³»ç»Ÿæ¨¡æ¿</span>
                            </div>
                            <div class="report-info">åŒ…å«ï¼šå‘ç”µé‡ã€æ”¶ç›Šã€æ•ˆç‡ã€å‘Šè­¦ç»Ÿè®¡</div>
                            <div class="report-info">æ•°æ®èŒƒå›´ï¼šæœˆæŠ¥</div>
                            <div class="report-info">åˆ›å»ºæ—¶é—´ï¼š2024-01-01</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="useTemplate('monthly-operation')">ä½¿ç”¨æ¨¡æ¿</button>
                                <button class="btn-report" onclick="viewTemplate('monthly-operation')">æŸ¥çœ‹è¯¦æƒ…</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">è®¾å¤‡å¥åº·åº¦æŠ¥è¡¨</h4>
                                <span class="report-type">ç”¨æˆ·æ¨¡æ¿</span>
                            </div>
                            <div class="report-info">åŒ…å«ï¼šè®¾å¤‡çŠ¶æ€ã€æ•…éšœç‡ã€ç»´æŠ¤è®°å½•</div>
                            <div class="report-info">æ•°æ®èŒƒå›´ï¼šå‘¨æŠ¥</div>
                            <div class="report-info">åˆ›å»ºæ—¶é—´ï¼š2024-01-15</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="useTemplate('device-health')">ä½¿ç”¨æ¨¡æ¿</button>
                                <button class="btn-report" onclick="editTemplate('device-health')">ç¼–è¾‘</button>
                                <button class="btn-report" onclick="deleteTemplate('device-health')">åˆ é™¤</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">å³°è°·å¥—åˆ©åˆ†æ</h4>
                                <span class="report-type">ç”¨æˆ·æ¨¡æ¿</span>
                            </div>
                            <div class="report-info">åŒ…å«ï¼šå……æ”¾ç”µæ—¶æ®µã€ç”µä»·å·®ã€æ”¶ç›Šè®¡ç®—</div>
                            <div class="report-info">æ•°æ®èŒƒå›´ï¼šæ—¥æŠ¥</div>
                            <div class="report-info">åˆ›å»ºæ—¶é—´ï¼š2024-01-20</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="useTemplate('peak-valley')">ä½¿ç”¨æ¨¡æ¿</button>
                                <button class="btn-report" onclick="editTemplate('peak-valley')">ç¼–è¾‘</button>
                                <button class="btn-report" onclick="deleteTemplate('peak-valley')">åˆ é™¤</button>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- å·²ä¿å­˜æŠ¥è¡¨æ ‡ç­¾ -->
                <div class="tab-pane fade" id="saved" role="tabpanel">
                    <div class="saved-reports">
                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">2024å¹´1æœˆè¿è¥æŠ¥è¡¨</h4>
                                <span class="report-type">æœˆæŠ¥</span>
                            </div>
                            <div class="report-info">ç”µç«™ï¼šæœé˜³è·¯å·¥ä¸šå›­å‚¨èƒ½ç«™</div>
                            <div class="report-info">ç”Ÿæˆæ—¶é—´ï¼š2024-01-24 10:30</div>
                            <div class="report-info">æ–‡ä»¶å¤§å°ï¼š2.3 MB</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="viewReport('202401-operation')">æŸ¥çœ‹</button>
                                <button class="btn-report" onclick="downloadReport('202401-operation')">ä¸‹è½½</button>
                                <button class="btn-report" onclick="shareReport('202401-operation')">åˆ†äº«</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">è®¾å¤‡æ•…éšœåˆ†ææŠ¥å‘Š</h4>
                                <span class="report-type">è‡ªå®šä¹‰</span>
                            </div>
                            <div class="report-info">ç”µç«™ï¼šå…¨éƒ¨ç”µç«™</div>
                            <div class="report-info">ç”Ÿæˆæ—¶é—´ï¼š2024-01-23 14:20</div>
                            <div class="report-info">æ–‡ä»¶å¤§å°ï¼š1.8 MB</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="viewReport('device-fault')">æŸ¥çœ‹</button>
                                <button class="btn-report" onclick="downloadReport('device-fault')">ä¸‹è½½</button>
                                <button class="btn-report" onclick="deleteReport('device-fault')">åˆ é™¤</button>
                            </div>
                        </div>

                        <div class="report-card">
                            <div class="report-header">
                                <h4 class="report-title">ç¬¬3å‘¨æ”¶ç›ŠæŠ¥è¡¨</h4>
                                <span class="report-type">å‘¨æŠ¥</span>
                            </div>
                            <div class="report-info">ç”µç«™ï¼šåŸè¥¿é…ç”µç«™</div>
                            <div class="report-info">ç”Ÿæˆæ—¶é—´ï¼š2024-01-21 09:00</div>
                            <div class="report-info">æ–‡ä»¶å¤§å°ï¼š1.2 MB</div>
                            <div class="report-actions">
                                <button class="btn-report" onclick="viewReport('week3-revenue')">æŸ¥çœ‹</button>
                                <button class="btn-report" onclick="downloadReport('week3-revenue')">ä¸‹è½½</button>
                                <button class="btn-report" onclick="scheduleReport('week3-revenue')">å®šæ—¶å‘é€</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="../sidebar.js"></script>
    <script>
        let selectedTemplate = null;

        function selectTemplate(type) {
            selectedTemplate = type;
            
            // é«˜äº®é€‰ä¸­çš„æ¨¡æ¿
            document.querySelectorAll('.template-card').forEach(card => {
                card.classList.remove('selected');
            });
            event.currentTarget.classList.add('selected');
            
            // æ˜¾ç¤ºè¡¨å•
            document.getElementById('reportForm').style.display = 'block';
            
            // æ ¹æ®æ¨¡æ¿ç±»å‹åŠ è½½ä¸åŒçš„æ•°æ®æŒ‡æ ‡
            loadDataMetrics(type);
        }

        function loadDataMetrics(type) {
            const metricsContainer = document.getElementById('dataMetrics');
            let metrics = [];
            
            switch(type) {
                case 'station':
                    metrics = ['å‘ç”µé‡', 'å……ç”µé‡', 'æ”¾ç”µé‡', 'è¿è¡Œæ—¶é•¿', 'è®¾å¤‡åˆ©ç”¨ç‡', 'ç³»ç»Ÿæ•ˆç‡'];
                    break;
                case 'revenue':
                    metrics = ['å³°è°·å¥—åˆ©', 'éœ€é‡ç®¡ç†', 'è°ƒé¢‘æœåŠ¡', 'å®¹é‡ç”µè´¹', 'æ€»æ”¶ç›Š', 'æŠ•èµ„å›æŠ¥ç‡'];
                    break;
                case 'device':
                    metrics = ['è®¾å¤‡çŠ¶æ€', 'æ•…éšœæ¬¡æ•°', 'ç»´æŠ¤è®°å½•', 'å¥åº·åº¦', 'å¯ç”¨ç‡', 'å¹³å‡æ•…éšœé—´éš”'];
                    break;
                case 'energy':
                    metrics = ['å……ç”µæ•ˆç‡', 'æ”¾ç”µæ•ˆç‡', 'å¾€è¿”æ•ˆç‡', 'èƒ½é‡æŸè€—', 'SOCåˆ†å¸ƒ', 'åŠŸç‡å› æ•°'];
                    break;
                case 'alarm':
                    metrics = ['å‘Šè­¦æ€»æ•°', 'ä¸¥é‡å‘Šè­¦', 'ä¸€èˆ¬å‘Šè­¦', 'å‘Šè­¦è¶‹åŠ¿', 'å¤„ç†æ—¶é•¿', 'å‘Šè­¦ç±»å‹åˆ†å¸ƒ'];
                    break;
                case 'custom':
                    metrics = ['å‘ç”µé‡', 'å……ç”µé‡', 'æ”¾ç”µé‡', 'æ”¶ç›Š', 'æ•ˆç‡', 'å‘Šè­¦', 'è®¾å¤‡çŠ¶æ€', 'SOC', 'åŠŸç‡', 'æ¸©åº¦'];
                    break;
            }
            
            metricsContainer.innerHTML = metrics.map(metric => `
                <label class="custom-checkbox">
                    <input type="checkbox" name="metrics" value="${metric}" checked>
                    ${metric}
                </label>
            `).join('');
        }

        function previewReport() {
            const previewSection = document.getElementById('previewSection');
            previewSection.style.display = 'block';
            
            // æ¨¡æ‹Ÿé¢„è§ˆå†…å®¹
            const previewContent = document.querySelector('.preview-content');
            previewContent.innerHTML = `
                <div style="padding: 40px; text-align: left;">
                    <h4 style="color: #2c3e50; margin-bottom: 20px;">æŠ¥è¡¨é¢„è§ˆç”Ÿæˆä¸­...</h4>
                    <p style="color: #666;">æ­£åœ¨æ ¹æ®æ‚¨çš„é…ç½®ç”ŸæˆæŠ¥è¡¨é¢„è§ˆ</p>
                    <div class="spinner-border text-primary" role="status" style="margin-top: 20px;">
                        <span class="sr-only">Loading...</span>
                    </div>
                </div>
            `;
            
            // æ¨¡æ‹ŸåŠ è½½æ•ˆæœ
            setTimeout(() => {
                previewContent.innerHTML = `
                    <div style="padding: 20px; text-align: left; width: 100%;">
                        <h4 style="color: #2c3e50;">é¢„è§ˆå†…å®¹å·²ç”Ÿæˆ</h4>
                        <p style="color: #666;">è¿™é‡Œå°†æ˜¾ç¤ºæ ¹æ®æ‚¨é€‰æ‹©çš„æ¨¡æ¿å’Œé…ç½®ç”Ÿæˆçš„æŠ¥è¡¨é¢„è§ˆ</p>
                    </div>
                `;
            }, 2000);
        }

        function closePreview() {
            document.getElementById('previewSection').style.display = 'none';
        }

        function saveAsTemplate() {
            const reportName = document.getElementById('reportName').value;
            if (!reportName) {
                showMessage('è¯·è¾“å…¥æŠ¥è¡¨åç§°', 'error');
                return;
            }
            
            showMessage('æ­£åœ¨ä¿å­˜ä¸ºæ¨¡æ¿...', 'info');
            setTimeout(() => {
                showMessage('æ¨¡æ¿ä¿å­˜æˆåŠŸ', 'success');
            }, 1500);
        }

        function generateReport() {
            const reportName = document.getElementById('reportName').value;
            if (!reportName) {
                showMessage('è¯·è¾“å…¥æŠ¥è¡¨åç§°', 'error');
                return;
            }
            
            showMessage('æ­£åœ¨ç”ŸæˆæŠ¥è¡¨...', 'info');
            setTimeout(() => {
                showMessage('æŠ¥è¡¨ç”ŸæˆæˆåŠŸ', 'success');
                // åˆ‡æ¢åˆ°å·²ä¿å­˜æŠ¥è¡¨æ ‡ç­¾
                $('#saved-tab').tab('show');
            }, 2000);
        }

        function useTemplate(templateId) {
            // åˆ‡æ¢åˆ°åˆ›å»ºæŠ¥è¡¨æ ‡ç­¾
            $('#create-tab').tab('show');
            showMessage('å·²åŠ è½½æ¨¡æ¿é…ç½®', 'success');
        }

        function viewTemplate(templateId) {
            showMessage('æŸ¥çœ‹æ¨¡æ¿è¯¦æƒ…ï¼š' + templateId, 'info');
        }

        function editTemplate(templateId) {
            showMessage('ç¼–è¾‘æ¨¡æ¿ï¼š' + templateId, 'info');
        }

        function deleteTemplate(templateId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤æ­¤æ¨¡æ¿å—ï¼Ÿ')) {
                showMessage('æ¨¡æ¿å·²åˆ é™¤', 'success');
            }
        }

        function viewReport(reportId) {
            showMessage('æŸ¥çœ‹æŠ¥è¡¨ï¼š' + reportId, 'info');
        }

        function downloadReport(reportId) {
            showMessage('æ­£åœ¨ä¸‹è½½æŠ¥è¡¨...', 'info');
            setTimeout(() => {
                showMessage('æŠ¥è¡¨ä¸‹è½½æˆåŠŸ', 'success');
            }, 1500);
        }

        function shareReport(reportId) {
            showMessage('åˆ†äº«é“¾æ¥å·²ç”Ÿæˆ', 'success');
        }

        function deleteReport(reportId) {
            if (confirm('ç¡®å®šè¦åˆ é™¤æ­¤æŠ¥è¡¨å—ï¼Ÿ')) {
                showMessage('æŠ¥è¡¨å·²åˆ é™¤', 'success');
            }
        }

        function scheduleReport(reportId) {
            showMessage('è®¾ç½®å®šæ—¶å‘é€', 'info');
        }

        function showMessage(message, type) {
            const alertClass = type === 'success' ? 'alert-success' : 
                              type === 'error' ? 'alert-danger' : 'alert-info';
            
            const alertHtml = `
                <div class="alert ${alertClass} alert-dismissible fade show" role="alert" style="position: fixed; top: 20px; right: 20px; z-index: 9999;">
                    ${message}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            `;
            
            const alertElement = $(alertHtml);
            $('body').append(alertElement);
            
            setTimeout(() => {
                alertElement.alert('close');
            }, 3000);
        }
    </script>
</body>
</html>